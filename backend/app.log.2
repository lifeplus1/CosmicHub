2025-08-13 05:57:28,029 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:28,036 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:28,036 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:28,037 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:28,037 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:28,037 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:28,037 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:30,235 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:30,236 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:30,236 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:30,236 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:30,236 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:30,236 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:30,236 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:30,236 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:30,238 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:30,240 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:30,240 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:30,240 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:30,240 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:30,240 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:30,240 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:34,948 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:34,948 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:34,948 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:34,948 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:34,948 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:34,948 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:34,948 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:34,949 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:34,950 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:34,952 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:34,952 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:34,952 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:34,952 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:34,952 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:34,952 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:39,867 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:39,867 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:39,868 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:39,868 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:39,868 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:39,868 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:39,868 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:39,869 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:39,869 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:39,871 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:39,871 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:39,871 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:39,871 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:39,871 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:39,872 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:41,091 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:41,092 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:41,092 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:41,092 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:41,092 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:41,093 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:41,093 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:41,094 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:41,095 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b790>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b790>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b790>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b790>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:41,099 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:41,099 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:41,099 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:41,099 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:41,099 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:41,099 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:45,950 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:45,950 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:45,950 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:45,950 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:45,950 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:45,950 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:45,950 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:45,951 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:45,952 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:45,954 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:45,954 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:45,954 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:45,954 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:45,954 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:45,954 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:51,037 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:51,038 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:51,038 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:51,038 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:51,038 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:51,038 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:51,038 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:51,040 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:51,041 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:51,043 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:51,043 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:51,043 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:51,043 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:51,043 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:51,043 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:52,238 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:52,238 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:52,238 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:52,238 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:52,239 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:52,239 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:52,239 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:52,241 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:52,243 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:52,246 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:52,246 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:52,246 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:52,246 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:52,246 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:52,246 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:56,828 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:56,828 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:56,828 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:56,828 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:56,828 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:56,828 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:56,829 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:56,830 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:56,831 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:56,833 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:56,833 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:56,833 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:56,833 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:56,833 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:56,833 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:00,382 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:00,383 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:00,383 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:00,383 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:00,383 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:00,383 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:00,383 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:00,384 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:00,385 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:00,388 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:00,388 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:00,388 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:00,388 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:00,388 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:00,388 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:03,536 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:03,536 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:03,536 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:03,536 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:03,536 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:03,536 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:03,536 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:03,539 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:03,540 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:03,548 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:03,548 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:03,548 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:03,548 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:03,548 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:03,548 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:05,110 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:05,110 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:05,110 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:05,110 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:05,110 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:05,110 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:05,110 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:05,111 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:05,116 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:05,121 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:05,121 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:05,121 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:05,121 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:05,121 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:05,121 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:07,049 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:07,049 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:07,049 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:07,050 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:07,050 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:07,050 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:07,050 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:07,051 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:07,052 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:07,055 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:07,055 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:07,055 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:07,055 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:07,055 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:07,055 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:11,539 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:11,540 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:11,540 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:11,540 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:11,540 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:11,541 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:11,541 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:11,542 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:11,543 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:11,545 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:11,546 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:11,546 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:11,546 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:11,546 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:11,546 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:15,911 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:15,911 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:15,912 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:15,912 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:15,912 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:15,912 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:15,912 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:15,914 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:15,915 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:15,917 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:15,917 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:15,917 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:15,918 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:15,918 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:15,918 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:19,802 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:19,802 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:19,802 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:19,802 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:19,803 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:19,803 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:19,803 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:19,804 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:19,805 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:19,808 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:19,808 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:19,808 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:19,808 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:19,808 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:19,808 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:23,988 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:23,989 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:23,989 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:23,990 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:23,990 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:23,990 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:23,990 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:23,992 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:23,993 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:23,995 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:23,995 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:23,995 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:23,995 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:23,995 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:23,995 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:28,089 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:28,089 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:28,089 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:28,090 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:28,090 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:28,090 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:28,090 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:28,092 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:28,093 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:28,095 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:28,095 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:28,095 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:28,095 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:28,095 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:28,095 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:30,116 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:30,117 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:30,117 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:30,117 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:30,117 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:30,117 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:30,117 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:30,120 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:30,121 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:30,123 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:30,123 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:30,123 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:30,123 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:30,123 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:30,123 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:33,823 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:33,823 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:33,823 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:33,823 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:33,824 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:33,824 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:33,824 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:33,826 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:33,827 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:33,829 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:33,830 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:33,830 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:33,830 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:33,830 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:33,830 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:38,375 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:38,375 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:38,375 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:38,375 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:38,375 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:38,375 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:38,376 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:38,376 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:38,377 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:38,381 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:38,381 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:38,381 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:38,381 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:38,381 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:38,381 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:40,963 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:40,964 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:40,964 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:40,964 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:40,964 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:40,964 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:40,964 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:40,965 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:40,966 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:40,968 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:40,968 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:40,968 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:40,968 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:40,968 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:40,968 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:43,012 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:43,013 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:43,013 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:43,013 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:43,013 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:43,013 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:43,013 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:43,015 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:43,016 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d186b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d186b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d186b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d186b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:43,020 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:43,020 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:43,020 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:43,020 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:43,020 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:43,020 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:47,598 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:47,599 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:47,601 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:47,601 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:47,601 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:47,601 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:47,601 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:47,602 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:47,608 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:47,613 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:47,613 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:47,613 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:47,613 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:47,613 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:47,614 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:49,479 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:49,479 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:49,479 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:49,479 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:49,479 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:49,479 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:49,479 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:49,481 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:49,482 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:49,484 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:49,484 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:49,485 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:49,485 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:49,485 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:49,485 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:51,433 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:51,433 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:51,433 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:51,433 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:51,433 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:51,433 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:51,433 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:51,435 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:51,437 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:51,439 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:51,439 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:51,439 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:51,439 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:51,439 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:51,439 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:58:56,023 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:58:56,023 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:58:56,023 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:58:56,023 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:58:56,023 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:58:56,024 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:58:56,024 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:58:56,026 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:58:56,027 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:58:56,029 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:58:56,029 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:58:56,030 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:58:56,030 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:58:56,030 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:58:56,030 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:00,396 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:00,396 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:00,396 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:00,397 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:00,397 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:00,397 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:00,397 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:00,398 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:00,399 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:00,401 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:00,402 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:00,402 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:00,402 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:00,402 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:00,402 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:03,036 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:03,036 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:03,037 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:03,037 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:03,037 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:03,037 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:03,037 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:03,039 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:03,040 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b350>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b350>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b350>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b350>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:03,043 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:03,043 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:03,043 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:03,043 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:03,043 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:03,043 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:04,722 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:04,723 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:04,723 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:04,723 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:04,723 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:04,723 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:04,724 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:04,725 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:04,727 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:04,732 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:04,732 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:04,732 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:04,732 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:04,732 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:04,732 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:07,003 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:07,004 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:07,004 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:07,004 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:07,004 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:07,004 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:07,004 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:07,006 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:07,007 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:07,009 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:07,009 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:07,009 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:07,009 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:07,009 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:07,009 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:12,013 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:12,014 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:12,014 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:12,014 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:12,014 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:12,014 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:12,014 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:12,015 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:12,016 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:12,017 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:12,018 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:12,018 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:12,018 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:12,018 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:12,018 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:15,793 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:15,793 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:15,793 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:15,793 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:15,794 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:15,794 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:15,794 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:15,796 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:15,797 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:15,799 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:15,799 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:15,799 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:15,799 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:15,799 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:15,799 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:17,721 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:17,721 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:17,721 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:17,722 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:17,722 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:17,722 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:17,722 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:17,723 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:17,724 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:17,726 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:17,726 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:17,726 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:17,726 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:17,726 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:17,726 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:21,326 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:21,326 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:21,327 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:21,327 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:21,327 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:21,327 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:21,327 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:21,329 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:21,330 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:21,334 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:21,334 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:21,335 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:21,335 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:21,335 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:21,335 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:26,304 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:26,304 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:26,304 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:26,305 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:26,305 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:26,305 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:26,305 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:26,307 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:26,309 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:26,311 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:26,311 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:26,312 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:26,312 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:26,312 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:26,312 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:30,052 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:30,053 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:30,053 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:30,053 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:30,053 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:30,053 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:30,054 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:30,056 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:30,057 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:30,059 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:30,059 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:30,059 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:30,059 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:30,059 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:30,060 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:32,195 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:32,196 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:32,196 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:32,196 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:32,196 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:32,196 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:32,196 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:32,198 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:32,200 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:32,203 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:32,203 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:32,203 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:32,203 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:32,203 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:32,203 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:34,884 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:34,884 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:34,884 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:34,884 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:34,884 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:34,884 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:34,884 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:34,885 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:34,886 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:34,888 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:34,888 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:34,888 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:34,888 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:34,888 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:34,888 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:38,521 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:38,521 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:38,521 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:38,521 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:38,521 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:38,521 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:38,521 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:38,522 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:38,523 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:38,524 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:38,525 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:38,525 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:38,525 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:38,525 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:38,525 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:41,138 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:41,138 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:41,139 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:41,139 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:41,139 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:41,139 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:41,139 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:41,141 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:41,142 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:41,145 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:41,145 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:41,145 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:41,145 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:41,145 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:41,145 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:43,808 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:43,808 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:43,809 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:43,809 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:43,809 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:43,809 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:43,809 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:43,812 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:43,813 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:43,814 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:43,815 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:43,815 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:43,815 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:43,815 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:43,815 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:47,080 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:47,081 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:47,081 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:47,081 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:47,081 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:47,082 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:47,082 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:47,083 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:47,084 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:47,086 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:47,087 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:47,087 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:47,087 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:47,087 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:47,087 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:52,145 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:52,146 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:52,146 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:52,146 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:52,146 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:52,146 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:52,146 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:52,148 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:52,149 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:52,151 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:52,151 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:52,151 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:52,151 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:52,151 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:52,151 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:59:57,036 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:59:57,037 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:59:57,037 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:59:57,037 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:59:57,038 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:59:57,038 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:59:57,038 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:59:57,040 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:59:57,041 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:59:57,043 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:59:57,043 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:59:57,043 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:59:57,043 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:59:57,043 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:59:57,043 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:01,652 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:01,652 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:01,652 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:01,652 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:01,652 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:01,652 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:01,652 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:01,653 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:01,654 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:01,656 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:01,656 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:01,656 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:01,656 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:01,656 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:01,656 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:03,145 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:03,146 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:03,146 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:03,146 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:03,146 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:03,146 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:03,146 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:03,147 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:03,148 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:03,151 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:03,151 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:03,151 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:03,151 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:03,151 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:03,151 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:07,872 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:07,873 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:07,873 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:07,873 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:07,873 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:07,873 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:07,873 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:07,874 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:07,875 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:07,876 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:07,876 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:07,876 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:07,877 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:07,877 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:07,877 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:12,056 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:12,057 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:12,057 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:12,057 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:12,057 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:12,057 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:12,057 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:12,059 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:12,060 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:12,062 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:12,062 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:12,062 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:12,062 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:12,062 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:12,062 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:17,007 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:17,007 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:17,007 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:17,008 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:17,008 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:17,008 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:17,008 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:17,009 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:17,010 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:17,013 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:17,013 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:17,013 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:17,013 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:17,013 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:17,013 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:19,474 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:19,475 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:19,475 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:19,475 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:19,475 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:19,475 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:19,475 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:19,476 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:19,485 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:19,488 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:19,488 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:19,488 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:19,488 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:19,488 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:19,489 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:24,024 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:24,025 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:24,025 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:24,025 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:24,025 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:24,025 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:24,026 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:24,027 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:24,029 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:24,031 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:24,031 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:24,031 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:24,031 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:24,031 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:24,031 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:27,637 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:27,637 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:27,637 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:27,637 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:27,637 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:27,638 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:27,638 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:27,639 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:27,640 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19480>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19480>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19480>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19480>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:27,643 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:27,643 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:27,643 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:27,643 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:27,643 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:27,643 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:30,785 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:30,786 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:30,786 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:30,786 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:30,786 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:30,786 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:30,786 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:30,788 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:30,789 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:30,791 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:30,791 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:30,792 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:30,792 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:30,792 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:30,792 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:35,561 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:35,561 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:35,562 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:35,562 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:35,562 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:35,562 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:35,562 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:35,563 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:35,564 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:35,566 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:35,566 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:35,567 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:35,567 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:35,567 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:35,567 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:39,278 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:39,278 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:39,279 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:39,279 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:39,279 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:39,279 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:39,279 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:39,281 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:39,282 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:39,285 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:39,285 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:39,285 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:39,286 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:39,286 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:39,286 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:43,447 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:43,448 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:43,448 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:43,448 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:43,448 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:43,449 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:43,449 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:43,450 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:43,451 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:43,454 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:43,454 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:43,454 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:43,454 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:43,454 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:43,454 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:45,335 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:45,335 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:45,335 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:45,335 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:45,335 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:45,335 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:45,336 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:45,337 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:45,339 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:45,341 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:45,341 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:45,341 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:45,341 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:45,341 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:45,341 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:48,877 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:48,877 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:48,877 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:48,878 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:48,878 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:48,878 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:48,878 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:48,879 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:48,880 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:48,884 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:48,884 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:48,884 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:48,885 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:48,885 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:48,886 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:52,344 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:52,345 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:52,345 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:52,345 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:52,346 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:52,346 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:52,346 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:52,347 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:52,348 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:52,350 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:52,350 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:52,350 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:52,350 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:52,351 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:52,351 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:54,579 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:54,579 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:54,579 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:54,579 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:54,579 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:54,579 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:54,580 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:54,580 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:54,581 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:54,583 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:54,583 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:54,583 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:54,583 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:54,583 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:54,583 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:00:58,298 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:00:58,298 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:00:58,298 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:00:58,298 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:00:58,298 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:00:58,299 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:00:58,299 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:00:58,302 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:00:58,305 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:00:58,308 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:00:58,309 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:00:58,309 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:00:58,309 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:00:58,309 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:00:58,309 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:00,026 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:00,027 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:00,027 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:00,027 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:00,027 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:00,027 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:00,027 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:00,028 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:00,034 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:00,037 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:00,037 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:00,037 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:00,037 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:00,037 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:00,037 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:01,435 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:01,435 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:01,435 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:01,435 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:01,435 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:01,435 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:01,435 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:01,436 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:01,437 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:01,439 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:01,439 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:01,439 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:01,439 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:01,439 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:01,439 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:03,463 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:03,464 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:03,464 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:03,464 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:03,464 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:03,464 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:03,464 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:03,466 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:03,467 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:03,472 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:03,472 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:03,473 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:03,473 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:03,473 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:03,473 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:05,612 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:05,612 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:05,612 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:05,613 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:05,613 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:05,613 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:05,613 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:05,615 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:05,616 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:05,618 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:05,618 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:05,618 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:05,618 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:05,618 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:05,618 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:08,370 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:08,371 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:08,371 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:08,371 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:08,371 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:08,371 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:08,371 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:08,372 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:08,373 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:08,376 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:08,376 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:08,376 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:08,376 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:08,376 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:08,376 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:10,591 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:10,592 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:10,592 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:10,592 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:10,592 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:10,592 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:10,592 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:10,594 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:10,596 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:10,600 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:10,600 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:10,601 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:10,601 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:10,601 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:10,601 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:11,912 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:11,912 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:11,912 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:11,912 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:11,912 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:11,912 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:11,912 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:11,913 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:11,914 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:11,916 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:11,916 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:11,916 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:11,916 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:11,916 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:11,916 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:15,714 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:15,714 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:15,714 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:15,714 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:15,715 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:15,715 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:15,715 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:15,717 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:15,718 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:15,720 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:15,720 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:15,721 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:15,721 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:15,721 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:15,721 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:17,780 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:17,781 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:17,781 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:17,781 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:17,781 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:17,781 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:17,781 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:17,783 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:17,784 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:17,787 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:17,787 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:17,787 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:17,787 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:17,787 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:17,787 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:22,413 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:22,413 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:22,413 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:22,413 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:22,414 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:22,414 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:22,414 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:22,415 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:22,417 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:22,419 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:22,419 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:22,419 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:22,419 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:22,419 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:22,419 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:26,634 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:26,635 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:26,635 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:26,635 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:26,636 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:26,636 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:26,636 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:26,638 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:26,639 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:26,641 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:26,641 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:26,641 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:26,641 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:26,641 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:26,641 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:30,184 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:30,184 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:30,185 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:30,185 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:30,185 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:30,185 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:30,185 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:30,185 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:30,186 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:30,188 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:30,188 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:30,188 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:30,188 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:30,188 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:30,188 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:34,861 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:34,862 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:34,862 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:34,862 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:34,862 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:34,863 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:34,863 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:34,866 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:34,867 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:34,869 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:34,869 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:34,869 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:34,869 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:34,869 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:34,869 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:39,399 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:39,399 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:39,399 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:39,399 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:39,400 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:39,400 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:39,400 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:39,401 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:39,403 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:39,405 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:39,405 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:39,405 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:39,405 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:39,405 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:39,405 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:40,660 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:40,660 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:40,660 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:40,660 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:40,661 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:40,661 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:40,661 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:40,662 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:40,665 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:40,667 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:40,667 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:40,667 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:40,667 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:40,667 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:40,667 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:43,693 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:43,693 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:43,693 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:43,693 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:43,693 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:43,693 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:43,694 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:43,695 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:43,696 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:43,698 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:43,698 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:43,699 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:43,699 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:43,699 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:43,699 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:47,117 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:47,117 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:47,117 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:47,117 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:47,118 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:47,118 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:47,118 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:47,119 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:47,121 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:47,123 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:47,123 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:47,123 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:47,123 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:47,124 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:47,124 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:51,678 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:51,679 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:51,679 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:51,679 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:51,679 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:51,679 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:51,679 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:51,680 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:51,682 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:51,684 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:51,684 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:51,684 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:51,684 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:51,684 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:51,684 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:56,503 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:56,504 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:56,504 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:56,504 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:56,504 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:56,504 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:56,504 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:56,505 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:56,506 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:56,508 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:56,508 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:56,508 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:56,508 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:56,508 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:56,508 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:01:57,875 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:01:57,875 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:01:57,875 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:01:57,875 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:01:57,875 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:01:57,876 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:01:57,876 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:01:57,876 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:01:57,877 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:01:57,879 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:01:57,879 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:01:57,879 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:01:57,879 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:01:57,879 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:01:57,879 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:01,773 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:01,773 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:01,773 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:01,773 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:01,774 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:01,774 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:01,774 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:01,775 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:01,776 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:01,779 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:01,779 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:01,779 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:01,779 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:01,779 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:01,779 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:06,725 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:06,725 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:06,725 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:06,725 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:06,725 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:06,726 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:06,726 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:06,727 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:06,728 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:06,732 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:06,733 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:06,733 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:06,733 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:06,733 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:06,733 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:10,881 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:10,882 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:10,882 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:10,882 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:10,882 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:10,882 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:10,882 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:10,883 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:10,886 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:10,889 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:10,889 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:10,889 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:10,889 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:10,889 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:10,889 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:14,937 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:14,939 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:14,939 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:14,939 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:14,940 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:14,940 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:14,940 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:14,940 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:14,941 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:14,943 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:14,943 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:14,943 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:14,943 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:14,943 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:14,944 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:17,764 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:17,764 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:17,764 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:17,764 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:17,764 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:17,764 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:17,764 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:17,765 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:17,767 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:17,769 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:17,769 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:17,769 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:17,769 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:17,769 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:17,769 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:20,732 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:20,733 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:20,733 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:20,733 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:20,733 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:20,733 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:20,733 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:20,736 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:20,737 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:20,739 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:20,739 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:20,739 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:20,739 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:20,739 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:20,739 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:24,772 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:24,772 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:24,772 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:24,772 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:24,772 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:24,772 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:24,773 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:24,775 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:24,776 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:24,779 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:24,780 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:24,780 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:24,780 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:24,780 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:24,780 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:27,658 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:27,659 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:27,659 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:27,659 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:27,660 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:27,660 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:27,661 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:27,664 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:27,665 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:27,668 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:27,668 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:27,668 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:27,668 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:27,668 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:27,668 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:31,528 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:31,528 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:31,528 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:31,528 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:31,528 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:31,528 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:31,528 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:31,529 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:31,530 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:31,532 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:31,532 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:31,532 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:31,532 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:31,532 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:31,533 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:34,724 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:34,724 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:34,725 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:34,725 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:34,725 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:34,725 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:34,725 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:34,727 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:34,729 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:34,731 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:34,731 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:34,732 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:34,732 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:34,732 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:34,732 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:36,101 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:36,101 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:36,101 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:36,102 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:36,102 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:36,102 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:36,102 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:36,102 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:36,103 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:36,105 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:36,105 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:36,105 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:36,106 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:36,106 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:36,106 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:39,733 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:39,733 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:39,733 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:39,734 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:39,734 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:39,734 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:39,734 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:39,735 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:39,737 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:39,739 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:39,739 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:39,739 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:39,739 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:39,739 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:39,739 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:41,440 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:41,440 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:41,440 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:41,440 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:41,440 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:41,440 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:41,440 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:41,441 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:41,442 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b130>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:41,444 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:41,444 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:41,444 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:41,444 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:41,444 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:41,444 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:45,353 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:45,354 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:45,354 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:45,354 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:45,354 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:45,354 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:45,354 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:45,356 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:45,357 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:45,359 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:45,359 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:45,359 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:45,359 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:45,359 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:45,359 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:50,380 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:50,380 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:50,380 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:50,380 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:50,380 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:50,381 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:50,381 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:50,382 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:50,383 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:50,386 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:50,386 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:50,386 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:50,386 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:50,386 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:50,386 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:52,746 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:52,747 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:52,747 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:52,748 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:52,748 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:52,748 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:52,748 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:52,750 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:52,751 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:52,753 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:52,753 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:52,753 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:52,753 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:52,754 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:52,754 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:02:56,907 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:02:56,907 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:02:56,907 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:02:56,908 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:02:56,908 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:02:56,908 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:02:56,908 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:02:56,914 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:02:56,915 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:02:56,917 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:02:56,917 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:02:56,917 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:02:56,918 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:02:56,918 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:02:56,918 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:01,814 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:01,815 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:01,815 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:01,815 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:01,815 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:01,815 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:01,815 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:01,817 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:01,818 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:01,820 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:01,820 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:01,820 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:01,820 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:01,820 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:01,820 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:04,704 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:04,704 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:04,705 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:04,705 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:04,705 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:04,705 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:04,705 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:04,706 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:04,707 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:04,710 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:04,710 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:04,710 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:04,710 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:04,710 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:04,710 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:08,776 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:08,776 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:08,777 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:08,777 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:08,777 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:08,777 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:08,777 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:08,780 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:08,781 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:08,783 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:08,783 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:08,783 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:08,783 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:08,783 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:08,783 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:11,935 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:11,935 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:11,935 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:11,935 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:11,935 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:11,935 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:11,935 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:11,936 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:11,936 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:11,938 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:11,938 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:11,938 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:11,938 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:11,939 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:11,939 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:13,630 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:13,630 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:13,630 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:13,630 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:13,631 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:13,631 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:13,631 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:13,633 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:13,634 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:13,639 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:13,639 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:13,639 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:13,639 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:13,639 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:13,639 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:15,312 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:15,312 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:15,312 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:15,313 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:15,313 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:15,313 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:15,313 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:15,315 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:15,316 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:15,318 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:15,318 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:15,318 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:15,318 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:15,318 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:15,318 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:16,833 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:16,833 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:16,833 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:16,833 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:16,834 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:16,835 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:16,835 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:16,837 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:16,838 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:16,841 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:16,841 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:16,841 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:16,841 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:16,841 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:16,841 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:20,273 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:20,273 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:20,273 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:20,273 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:20,273 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:20,273 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:20,273 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:20,274 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:20,275 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:20,278 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:20,278 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:20,278 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:20,278 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:20,278 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:20,278 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:23,789 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:23,789 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:23,789 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:23,789 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:23,789 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:23,789 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:23,789 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:23,792 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:23,797 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:23,804 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:23,805 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:23,805 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:23,805 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:23,805 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:23,805 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:26,250 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:26,250 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:26,250 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:26,250 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:26,251 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:26,251 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:26,251 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:26,251 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:26,252 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:26,254 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:26,255 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:26,255 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:26,255 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:26,255 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:26,255 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:30,685 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:30,686 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:30,686 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:30,686 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:30,686 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:30,686 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:30,686 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:30,687 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:30,688 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:30,690 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:30,690 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:30,691 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:30,691 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:30,691 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:30,691 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:32,970 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:32,971 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:32,971 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:32,971 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:32,971 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:32,971 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:32,971 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:32,971 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:32,973 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:32,974 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:32,974 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:32,975 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:32,975 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:32,975 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:32,975 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:35,237 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:35,237 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:35,237 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:35,237 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:35,237 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:35,237 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:35,237 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:35,238 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:35,239 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:35,241 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:35,241 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:35,241 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:35,241 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:35,241 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:35,241 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:39,667 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:39,667 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:39,667 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:39,667 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:39,667 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:39,667 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:39,667 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:39,668 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 06:03:39,669 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 06:03:39,674 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 06:03:39,674 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 06:03:39,674 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 06:03:39,674 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 06:03:39,674 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 06:03:39,674 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 06:03:42,088 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 06:03:42,088 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 06:03:42,088 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 06:03:42,089 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 06:03:42,089 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 06:03:42,089 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 06:03:42,089 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 06:03:42,091 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
