2025-08-13 05:52:52,063 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:52,069 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:52,069 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:52,069 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:52,069 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:52,069 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:52,069 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:52,933 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:52,933 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:52,933 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:52,933 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:52,933 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:52,933 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:52,933 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:52,934 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:52,935 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:52,937 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:52,937 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:52,937 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:52,937 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:52,937 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:52,937 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:54,883 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:54,883 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:54,883 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:54,883 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:54,883 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:54,883 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:54,883 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:54,884 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:54,885 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:54,887 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:54,887 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:54,887 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:54,887 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:54,887 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:54,888 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:56,858 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:56,858 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:56,858 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:56,858 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:56,858 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:56,858 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:56,858 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:56,859 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:56,860 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:56,862 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:56,862 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:56,862 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:56,862 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:56,862 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:56,862 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:58,367 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:58,367 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:58,367 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:58,368 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:58,368 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:58,368 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:58,368 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:58,368 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:58,369 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:58,371 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:58,371 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:58,371 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:58,371 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:58,371 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:58,371 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:00,959 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:00,959 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:00,959 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:00,959 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:00,960 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:00,960 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:00,960 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:00,961 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:00,963 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:00,965 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:00,965 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:00,965 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:00,965 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:00,965 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:00,965 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:03,242 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:03,242 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:03,243 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:03,243 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:03,243 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:03,243 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:03,243 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:03,244 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:03,246 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:03,248 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:03,248 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:03,248 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:03,248 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:03,248 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:03,249 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:03,287 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:03,287 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:03,287 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:03,287 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:03,287 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:03,287 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:03,287 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:03,289 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:03,290 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:03,292 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:03,292 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:03,292 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:03,292 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:03,292 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:03,292 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:06,714 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:06,714 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:06,714 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:06,714 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:06,714 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:06,714 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:06,714 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:06,715 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:06,716 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:06,719 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:06,719 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:06,719 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:06,719 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:06,719 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:06,719 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:06,851 INFO main Starting FastAPI application
2025-08-13 05:53:06,851 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:53:06,855 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:53:06,855 INFO main  CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:53:06,943 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:53:07,053 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:53:08,011 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:08,011 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:08,011 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:08,011 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:08,011 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:08,011 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:08,011 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:08,012 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:08,013 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:08,014 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:08,014 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:08,014 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:08,014 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:08,014 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:08,014 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:09,221 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:09,222 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:09,222 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:09,222 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:09,222 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:09,222 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:09,222 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:09,225 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:09,226 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:09,228 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:09,228 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:09,228 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:09,228 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:09,228 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:09,228 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:11,713 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:11,713 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:11,713 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:11,713 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:11,714 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:11,714 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:11,714 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:11,714 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:11,715 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:11,718 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:11,718 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:11,718 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:11,718 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:11,718 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:11,718 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:13,616 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:13,616 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:13,616 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:13,616 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:13,617 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:13,617 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:13,617 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:13,618 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:13,618 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:13,621 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:13,621 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:13,621 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:13,621 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:13,621 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:13,621 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:15,735 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:15,735 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:15,735 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:15,735 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:15,735 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:15,735 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:15,735 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:15,736 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:15,738 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:15,740 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:15,740 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:15,740 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:15,740 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:15,740 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:15,740 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:16,374 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:16,374 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:16,374 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:16,374 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:16,374 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:16,374 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:16,374 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:16,375 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:16,376 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:16,378 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:16,378 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:16,378 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:16,378 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:16,378 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:16,378 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:18,724 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:18,724 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:18,724 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:18,724 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:18,724 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:18,724 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:18,724 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:18,726 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:18,726 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:18,729 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:18,729 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:18,729 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:18,729 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:18,729 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:18,729 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:18,818 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:18,818 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:18,818 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:18,818 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:18,818 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:18,818 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:18,818 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:18,819 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:18,820 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:18,822 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:18,822 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:18,822 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:18,822 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:18,822 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:18,822 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:45,273 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:45,274 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:45,275 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:45,275 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:45,275 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:45,275 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:45,275 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:45,277 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:45,278 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:45,280 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:45,280 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:45,281 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:45,281 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:45,281 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:45,281 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:46,355 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:46,355 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:46,355 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:46,355 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:46,355 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:46,355 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:46,355 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:46,356 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:46,357 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:46,363 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:46,363 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:46,363 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:46,363 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:46,363 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:46,364 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:46,594 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:46,595 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:46,595 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:46,595 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:46,595 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:46,595 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:46,595 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:46,596 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:46,597 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:46,601 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:46,601 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:46,601 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:46,601 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:46,601 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:46,601 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:47,804 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:47,804 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:47,804 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:47,804 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:47,804 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:47,804 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:47,804 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:47,805 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:47,805 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:47,807 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:47,807 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:47,807 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:47,808 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:47,808 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:47,808 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:48,603 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:48,603 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:48,603 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:48,603 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:48,603 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:48,603 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:48,603 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:48,604 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:48,605 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:48,608 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:48,608 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:48,608 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:48,608 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:48,608 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:48,608 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:51,961 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:51,961 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:51,961 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:51,961 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:51,961 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:51,962 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:51,962 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:51,963 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:51,964 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:51,966 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:51,966 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:51,966 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:51,966 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:51,966 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:51,966 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:52,064 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:52,064 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:52,064 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:52,064 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:52,064 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:52,064 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:52,064 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:52,066 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:52,067 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:52,069 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:52,069 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:52,069 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:52,069 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:52,069 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:52,069 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:53,395 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:53,396 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:53,396 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:53,396 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:53,396 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:53,396 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:53,397 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:53,398 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:53,399 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:53,402 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:53,402 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:53,402 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:53,402 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:53,402 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:53,402 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:53,571 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:53,571 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:53,571 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:53,571 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:53,571 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:53,571 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:53,571 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:53,572 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:53,573 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:53,575 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:53,575 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:53,575 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:53,575 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:53,575 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:53,575 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:55,541 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:55,541 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:55,541 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:55,541 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:55,541 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:55,541 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:55,542 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:55,543 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:55,545 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bf00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:55,547 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:55,547 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:55,547 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:55,547 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:55,547 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:55,547 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:57,196 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:57,196 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:57,196 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:57,196 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:57,196 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:57,196 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:57,196 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:57,197 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:57,198 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:57,201 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:57,201 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:57,201 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:57,201 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:57,201 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:57,201 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:53:57,464 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:53:57,464 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:53:57,465 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:53:57,465 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:53:57,465 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:53:57,465 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:53:57,465 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:53:57,466 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:53:57,467 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:53:57,470 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:53:57,470 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:53:57,470 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:53:57,470 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:53:57,470 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:53:57,470 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:00,503 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:00,504 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:00,504 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:00,504 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:00,504 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:00,504 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:00,504 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:00,505 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:00,505 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:00,507 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:00,507 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:00,507 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:00,507 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:00,507 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:00,508 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:01,447 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:01,447 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:01,447 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:01,447 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:01,448 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:01,448 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:01,448 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:01,448 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:01,449 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:01,451 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:01,451 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:01,451 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:01,451 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:01,451 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:01,451 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:02,854 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:02,855 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:02,855 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:02,855 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:02,855 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:02,855 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:02,855 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:02,857 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:02,858 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:02,859 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:02,860 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:02,860 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:02,860 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:02,860 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:02,860 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:04,149 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:04,149 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:04,149 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:04,149 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:04,150 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:04,150 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:04,150 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:04,151 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:04,153 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:04,155 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:04,155 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:04,155 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:04,155 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:04,155 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:04,155 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:05,224 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:05,225 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:05,225 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:05,225 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:05,225 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:05,225 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:05,225 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:05,227 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:05,229 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:05,233 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:05,233 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:05,233 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:05,233 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:05,233 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:05,233 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:07,521 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:07,521 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:07,521 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:07,521 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:07,521 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:07,522 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:07,522 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:07,523 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:07,524 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:07,526 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:07,526 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:07,526 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:07,526 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:07,526 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:07,526 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:08,835 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:08,835 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:08,835 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:08,835 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:08,835 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:08,835 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:08,835 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:08,836 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:08,837 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:08,838 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:08,838 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:08,838 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:08,838 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:08,838 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:08,839 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:08,974 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:08,974 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:08,974 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:08,974 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:08,974 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:08,974 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:08,975 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:08,977 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:08,978 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:08,980 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:08,980 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:08,980 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:08,980 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:08,980 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:08,980 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:10,774 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:10,774 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:10,775 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:10,775 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:10,776 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:10,776 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:10,776 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:10,777 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:10,778 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:10,781 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:10,781 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:10,781 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:10,781 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:10,781 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:10,781 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:11,709 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:11,709 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:11,709 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:11,709 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:11,709 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:11,709 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:11,709 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:11,710 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:11,712 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:11,714 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:11,714 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:11,714 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:11,714 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:11,714 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:11,714 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:13,629 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:13,629 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:13,629 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:13,629 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:13,629 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:13,630 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:13,630 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:13,631 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:13,633 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b240>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:13,635 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:13,635 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:13,635 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:13,635 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:13,635 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:13,635 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:14,831 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:14,832 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:14,832 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:14,832 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:14,832 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:14,832 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:14,832 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:14,834 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:14,835 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:14,838 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:14,838 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:14,838 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:14,838 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:14,838 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:14,838 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:14,971 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:14,971 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:14,971 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:14,971 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:14,971 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:14,971 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:14,971 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:14,973 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:14,974 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:14,976 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:14,976 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:14,976 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:14,976 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:14,976 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:14,976 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:16,286 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:16,286 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:16,286 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:16,286 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:16,286 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:16,286 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:16,286 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:16,287 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:16,287 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:16,289 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:16,289 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:16,289 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:16,289 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:16,289 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:16,289 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:17,648 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:17,648 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:17,648 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:17,648 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:17,648 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:17,649 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:17,649 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:17,650 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:17,651 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:17,654 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:17,654 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:17,654 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:17,654 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:17,654 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:17,654 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:19,579 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:19,580 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:19,580 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:19,580 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:19,580 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:19,580 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:19,580 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:19,582 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:19,582 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:19,585 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:19,585 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:19,585 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:19,585 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:19,585 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:19,585 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:22,371 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:22,372 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:22,372 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:22,372 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:22,372 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:22,372 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:22,372 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:22,373 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:22,374 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:22,377 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:22,377 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:22,377 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:22,377 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:22,377 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:22,377 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:23,671 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:23,671 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:23,671 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:23,671 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:23,671 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:23,671 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:23,672 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:23,673 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:23,674 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:23,676 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:23,676 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:23,676 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:23,676 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:23,676 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:23,676 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:24,145 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:24,145 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:24,145 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:24,146 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:24,146 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:24,146 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:24,146 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:24,147 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:24,148 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:24,150 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:24,150 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:24,150 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:24,150 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:24,150 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:24,150 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:27,075 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:27,075 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:27,075 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:27,075 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:27,075 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:27,075 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:27,075 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:27,076 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:27,077 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:27,078 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:27,079 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:27,079 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:27,079 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:27,079 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:27,079 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:28,304 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:28,304 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:28,304 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:28,304 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:28,304 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:28,304 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:28,304 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:28,305 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:28,306 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:28,308 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:28,308 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:28,308 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:28,308 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:28,308 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:28,308 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:30,093 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:30,093 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:30,093 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:30,093 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:30,093 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:30,093 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:30,093 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:30,094 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:30,095 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:30,097 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:30,097 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:30,097 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:30,097 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:30,097 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:30,097 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:31,638 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:31,638 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:31,638 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:31,638 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:31,638 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:31,638 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:31,638 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:31,639 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:31,640 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:31,652 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:31,652 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:31,652 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:31,652 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:31,653 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:31,654 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:31,733 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:31,733 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:31,733 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:31,733 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:31,733 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:31,733 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:31,733 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:31,734 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:31,735 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:31,739 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:31,739 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:31,739 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:31,739 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:31,739 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:31,739 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:34,399 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:34,399 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:34,399 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:34,399 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:34,399 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:34,399 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:34,399 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:34,400 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:34,401 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:34,403 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:34,403 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:34,403 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:34,403 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:34,403 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:34,403 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:35,593 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:35,593 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:35,593 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:35,593 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:35,593 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:35,593 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:35,593 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:35,593 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:35,594 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:35,597 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:35,597 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:35,597 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:35,597 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:35,597 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:35,597 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:36,442 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:36,443 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:36,443 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:36,443 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:36,443 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:36,443 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:36,443 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:36,445 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:36,446 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:36,448 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:36,448 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:36,448 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:36,448 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:36,448 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:36,448 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:38,598 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:38,598 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:38,598 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:38,598 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:38,598 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:38,598 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:38,599 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:38,600 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:38,601 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:38,604 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:38,604 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:38,604 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:38,604 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:38,604 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:38,604 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:38,740 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:38,741 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:38,741 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:38,741 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:38,741 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:38,741 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:38,741 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:38,742 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:38,744 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:38,747 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:38,747 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:38,747 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:38,747 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:38,747 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:38,747 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:41,327 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:41,327 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:41,327 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:41,327 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:41,327 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:41,328 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:41,328 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:41,328 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:41,329 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:41,332 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:41,332 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:41,332 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:41,332 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:41,332 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:41,332 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:46,272 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:46,273 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:46,273 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:46,273 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:46,273 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:46,273 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:46,273 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:46,274 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:46,275 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:46,277 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:46,277 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:46,277 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:46,277 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:46,277 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:46,278 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:48,263 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:48,263 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:48,263 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:48,263 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:48,263 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:48,263 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:48,263 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:48,264 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:48,265 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:48,267 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:48,267 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:48,267 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:48,267 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:48,268 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:48,268 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:50,394 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:50,394 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:50,395 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:50,395 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:50,395 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:50,395 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:50,395 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:50,395 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:50,396 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:50,398 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:50,398 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:50,399 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:50,399 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:50,399 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:50,399 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:55,323 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:55,323 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:55,323 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:55,323 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:55,323 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:55,323 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:55,323 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:55,324 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:55,325 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:55,327 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:55,327 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:55,327 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:55,327 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:55,327 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:55,327 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:57,518 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:57,518 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:57,518 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:57,518 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:57,518 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:57,518 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:57,518 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:57,519 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:57,520 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:57,523 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:57,523 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:57,523 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:57,523 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:57,523 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:57,523 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:54:58,754 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:54:58,755 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:54:58,755 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:54:58,755 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:54:58,755 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:54:58,755 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:54:58,755 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:54:58,756 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:54:58,757 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:54:58,760 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:54:58,760 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:54:58,760 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:54:58,760 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:54:58,760 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:54:58,760 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:01,727 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:01,729 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:01,730 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:01,730 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:01,730 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:01,730 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:01,730 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:01,740 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:01,741 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:01,753 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:01,754 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:01,755 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:01,755 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:01,755 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:01,755 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:02,930 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:02,930 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:02,930 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:02,930 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:02,930 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:02,930 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:02,930 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:02,931 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:02,932 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:02,934 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:02,934 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:02,934 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:02,934 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:02,934 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:02,935 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:07,121 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:07,121 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:07,121 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:07,122 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:07,122 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:07,122 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:07,122 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:07,123 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:07,124 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:07,126 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:07,126 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:07,126 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:07,126 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:07,126 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:07,126 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:12,039 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:12,039 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:12,039 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:12,039 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:12,039 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:12,039 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:12,039 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:12,040 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:12,041 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:12,044 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:12,044 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:12,044 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:12,044 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:12,044 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:12,044 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:16,734 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:16,734 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:16,734 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:16,734 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:16,734 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:16,734 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:16,734 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:16,735 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:16,736 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18490>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:16,739 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:16,739 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:16,739 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:16,739 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:16,739 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:16,739 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:20,974 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:20,974 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:20,975 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:20,975 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:20,975 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:20,975 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:20,975 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:20,976 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:20,977 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:20,985 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:20,985 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:20,985 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:20,985 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:20,985 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:20,985 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:24,898 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:24,898 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:24,899 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:24,899 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:24,899 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:24,899 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:24,899 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:24,900 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:24,900 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:24,903 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:24,903 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:24,903 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:24,903 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:24,903 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:24,903 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:26,415 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:26,415 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:26,415 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:26,415 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:26,415 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:26,415 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:26,415 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:26,416 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:26,417 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:26,418 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:26,418 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:26,419 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:26,419 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:26,419 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:26,419 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:28,641 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:28,641 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:28,642 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:28,642 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:28,642 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:28,642 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:28,642 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:28,644 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:28,645 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:28,649 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:28,649 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:28,649 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:28,650 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:28,650 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:28,650 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:29,770 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:29,770 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:29,770 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:29,770 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:29,770 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:29,770 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:29,770 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:29,772 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:29,773 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:29,776 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:29,776 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:29,776 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:29,776 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:29,776 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:29,776 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:34,362 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:34,362 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:34,362 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:34,362 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:34,362 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:34,362 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:34,362 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:34,363 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:34,364 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d188d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:34,368 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:34,368 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:34,368 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:34,368 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:34,368 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:34,368 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:39,106 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:39,106 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:39,106 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:39,106 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:39,106 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:39,106 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:39,106 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:39,107 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:39,108 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:39,110 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:39,110 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:39,110 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:39,110 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:39,110 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:39,110 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:41,486 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:41,487 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:41,487 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:41,487 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:41,487 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:41,487 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:41,487 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:41,488 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:41,488 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:41,492 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:41,492 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:41,492 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:41,492 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:41,492 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:41,492 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:42,921 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:42,921 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:42,922 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:42,922 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:42,922 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:42,922 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:42,922 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:42,922 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:42,923 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d189e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:42,927 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:42,927 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:42,927 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:42,927 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:42,927 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:42,927 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:47,921 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:47,922 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:47,922 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:47,922 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:47,923 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:47,923 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:47,923 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:47,924 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:47,926 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:47,929 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:47,929 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:47,929 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:47,929 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:47,929 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:47,929 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:52,426 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:52,427 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:52,427 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:52,427 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:52,427 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:52,427 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:52,427 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:52,428 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:52,429 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18380>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:52,431 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:52,431 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:52,431 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:52,431 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:52,431 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:52,431 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:55,226 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:55,226 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:55,226 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:55,226 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:55,226 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:55,226 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:55,227 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:55,227 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:55,228 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d187c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:55,231 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:55,231 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:55,231 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:55,231 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:55,231 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:55,231 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:55:56,661 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:55:56,661 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:55:56,661 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:55:56,661 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:55:56,661 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:55:56,661 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:55:56,661 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:55:56,662 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:55:56,663 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:55:56,665 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:55:56,665 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:55:56,665 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:55:56,665 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:55:56,665 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:55:56,665 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:00,728 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:00,728 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:00,728 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:00,728 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:00,728 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:00,728 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:00,728 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:00,729 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:00,730 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b020>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:00,733 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:00,733 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:00,733 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:00,733 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:00,733 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:00,733 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:02,086 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:02,087 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:02,087 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:02,087 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:02,087 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:02,087 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:02,087 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:02,088 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:02,089 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:02,092 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:02,092 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:02,092 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:02,092 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:02,092 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:02,092 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:04,222 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:04,222 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:04,222 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:04,223 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:04,223 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:04,225 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:04,225 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:04,226 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:04,227 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:04,229 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:04,229 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:04,229 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:04,229 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:04,229 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:04,229 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:08,216 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:08,216 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:08,216 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:08,216 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:08,217 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:08,217 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:08,217 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:08,218 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:08,222 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19040>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:08,226 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:08,226 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:08,226 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:08,226 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:08,226 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:08,226 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:12,104 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:12,104 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:12,104 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:12,104 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:12,104 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:12,104 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:12,104 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:12,106 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:12,106 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:12,113 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:12,114 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:12,114 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:12,114 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:12,114 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:12,114 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:13,761 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:13,762 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:13,762 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:13,762 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:13,762 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:13,762 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:13,762 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:13,763 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:13,763 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:13,765 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:13,765 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:13,765 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:13,765 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:13,765 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:13,765 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:16,317 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:16,317 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:16,317 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:16,317 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:16,317 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:16,317 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:16,317 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:16,318 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:16,319 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:16,322 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:16,322 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:16,322 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:16,322 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:16,322 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:16,322 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:20,983 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:20,984 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:20,984 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:20,984 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:20,984 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:20,984 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:20,984 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:20,985 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:20,985 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:20,990 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:20,991 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:20,991 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:20,991 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:20,991 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:20,991 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:22,556 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:22,556 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:22,556 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:22,556 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:22,556 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:22,556 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:22,556 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:22,557 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:22,557 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:22,563 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:22,563 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:22,563 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:22,564 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:22,564 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:22,564 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:27,040 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:27,041 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:27,041 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:27,041 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:27,041 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:27,041 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:27,041 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:27,048 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:27,052 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:27,056 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:27,057 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:27,057 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:27,057 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:27,057 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:27,057 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:29,788 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:29,788 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:29,788 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:29,788 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:29,788 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:29,788 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:29,788 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:29,789 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:29,790 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:29,794 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:29,794 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:29,794 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:29,794 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:29,794 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:29,794 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:31,322 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:31,322 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:31,322 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:31,322 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:31,322 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:31,322 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:31,322 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:31,323 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:31,324 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:31,326 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:31,326 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:31,326 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:31,326 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:31,326 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:31,326 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:32,770 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:32,770 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:32,770 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:32,770 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:32,770 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:32,770 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:32,770 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:32,771 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:32,772 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:32,775 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:32,775 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:32,775 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:32,776 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:32,776 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:32,776 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:36,438 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:36,439 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:36,439 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:36,439 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:36,439 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:36,439 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:36,440 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:36,440 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:36,441 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:36,443 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:36,443 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:36,443 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:36,443 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:36,443 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:36,443 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:37,664 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:37,664 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:37,664 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:37,664 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:37,664 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:37,664 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:37,664 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:37,666 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:37,667 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:37,670 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:37,671 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:37,671 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:37,671 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:37,671 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:37,671 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:39,738 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:39,739 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:39,739 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:39,739 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:39,739 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:39,739 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:39,739 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:39,755 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:39,757 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:39,760 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:39,760 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:39,760 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:39,760 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:39,760 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:39,760 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:43,343 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:43,343 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:43,343 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:43,343 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:43,343 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:43,343 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:43,343 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:43,345 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:43,346 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19260>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:43,349 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:43,349 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:43,349 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:43,349 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:43,349 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:43,349 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:47,342 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:47,342 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:47,342 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:47,342 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:47,342 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:47,342 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:47,342 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:47,343 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:47,344 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:47,347 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:47,347 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:47,347 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:47,347 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:47,347 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:47,347 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:49,515 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:49,516 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:49,516 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:49,516 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:49,516 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:49,516 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:49,516 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:49,517 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:49,518 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:49,521 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:49,521 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:49,521 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:49,521 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:49,521 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:49,521 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:54,010 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:54,011 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:54,011 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:54,011 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:54,011 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:54,011 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:54,011 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:54,014 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:54,017 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:54,022 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:54,022 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:54,022 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:54,023 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:54,023 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:54,023 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:56:56,736 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:56:56,737 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:56:56,737 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:56:56,737 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:56:56,737 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:56:56,738 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:56:56,738 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:56:56,739 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:56:56,740 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:56:56,742 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:56:56,742 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:56:56,742 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:56:56,742 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:56:56,742 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:56:56,742 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:00,541 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:00,541 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:00,541 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:00,541 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:00,541 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:00,541 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:00,541 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:00,542 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:00,543 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:00,546 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:00,546 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:00,546 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:00,546 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:00,546 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:00,546 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:02,577 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:02,578 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:02,578 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:02,578 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:02,578 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:02,578 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:02,578 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:02,580 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:02,581 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18160>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18160>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18160>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18160>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:02,584 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:02,585 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:02,585 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:02,585 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:02,585 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:02,585 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:04,621 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:04,621 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:04,621 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:04,621 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:04,621 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:04,621 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:04,621 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:04,623 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:04,624 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:04,626 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:04,626 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:04,626 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:04,626 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:04,626 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:04,626 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:08,818 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:08,819 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:08,819 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:08,820 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:08,821 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:08,821 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:08,821 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:08,827 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:08,830 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:08,833 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:08,833 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:08,833 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:08,833 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:08,833 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:08,833 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:12,838 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:12,838 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:12,838 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:12,838 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:12,838 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:12,838 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:12,839 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:12,840 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:12,841 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:12,844 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:12,844 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:12,844 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:12,844 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:12,844 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:12,844 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:16,480 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:16,481 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:16,481 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:16,481 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:16,482 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:16,482 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:16,482 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:16,484 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:16,485 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:16,487 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:16,487 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:16,487 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:16,487 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:16,487 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:16,487 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:18,555 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:18,556 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:18,556 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:18,556 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:18,556 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:18,556 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:18,556 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:18,558 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:18,559 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:18,561 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:18,561 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:18,561 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:18,561 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:18,562 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:18,562 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:20,524 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:20,525 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:20,525 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:20,525 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:20,525 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:20,525 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:20,525 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:20,527 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:20,528 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18af0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:20,531 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:20,531 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:20,531 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:20,531 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:20,531 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:20,531 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:25,375 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:25,377 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:25,377 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:25,377 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:25,377 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:25,377 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:25,377 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:25,380 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:57:25,382 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:57:25,385 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:57:25,385 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:57:25,385 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:57:25,385 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:57:25,385 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:57:25,385 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:57:28,027 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:57:28,027 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:57:28,027 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:57:28,028 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:57:28,028 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:57:28,028 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:57:28,028 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:57:28,029 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
