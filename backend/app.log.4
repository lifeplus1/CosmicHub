2025-08-13 05:47:42,961 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10c7d2f90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:42,969 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:42,969 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:42,969 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:42,969 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:42,969 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:42,969 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:45,781 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:45,781 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:45,781 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:45,781 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:45,781 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:45,781 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:45,781 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:45,782 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:45,783 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d595bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d595bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d595bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d595bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:45,784 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:45,784 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:45,784 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:45,785 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:45,785 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:45,785 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:46,236 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:46,236 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:46,236 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:46,236 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:46,236 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:46,237 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:46,237 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:46,255 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:46,256 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4fdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:46,259 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:46,259 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:46,259 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:46,259 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:46,259 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:46,259 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:48,032 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:48,032 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:48,032 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:48,032 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:48,033 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:48,034 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:48,034 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:48,035 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:48,036 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:48,038 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:48,038 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:48,038 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:48,038 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:48,038 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:48,038 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:48,898 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:48,898 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:48,898 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:48,899 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:48,900 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:48,900 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:48,900 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:48,901 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:48,902 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:48,904 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:48,904 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:48,904 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:48,904 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:48,904 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:48,904 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:51,077 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:51,078 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:51,078 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:51,078 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:51,079 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:51,079 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:51,079 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:51,087 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:51,089 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff790>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4ff790>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff790>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff790>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:51,112 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:51,112 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:51,112 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:51,112 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:51,112 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:51,112 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:51,113 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:51,113 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:51,113 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:51,113 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:51,113 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:51,113 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:51,113 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:51,114 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:51,115 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d596250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:51,118 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:51,118 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:51,118 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:51,118 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:51,118 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:51,118 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:53,586 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:53,586 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:53,586 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:53,586 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:53,586 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:53,586 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:53,586 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:53,587 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:53,588 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d596030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:53,590 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:53,590 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:53,590 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:53,590 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:53,590 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:53,590 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:55,711 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:55,711 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:55,711 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:55,711 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:55,711 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:55,711 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:55,711 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:55,712 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:55,714 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596360>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d596360>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596360>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d596360>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:55,717 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:55,717 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:55,717 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:55,717 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:55,717 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:55,717 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:57,402 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:57,402 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:57,403 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:57,403 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:57,403 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:57,403 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:57,403 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:57,416 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:57,422 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:57,426 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:57,426 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:57,426 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:57,426 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:57,426 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:57,426 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:57,781 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:57,781 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:57,781 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:57,781 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:57,782 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:57,782 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:57,782 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:57,782 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:57,783 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4fecf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:57,785 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:57,786 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:57,786 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:57,786 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:57,786 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:57,786 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:58,571 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:58,571 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:58,572 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:58,572 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:58,572 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:58,572 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:58,572 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:58,572 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:58,573 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:58,576 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:58,576 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:58,576 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:58,576 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:58,576 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:58,576 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:01,360 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:01,361 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:01,361 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:01,361 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:01,361 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:01,362 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:01,362 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:01,363 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:01,365 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff240>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10b4ff240>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff240>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b4ff240>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:01,368 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:01,368 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:01,368 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:01,368 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:01,368 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:01,368 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:02,253 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:02,253 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:02,253 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:02,253 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:02,253 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:02,253 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:02,253 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:02,255 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:02,258 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d5956a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d5956a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d5956a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d5956a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:02,263 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:02,263 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:02,263 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:02,263 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:02,263 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:02,263 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:03,872 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:03,873 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:03,874 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:03,874 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:03,875 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:03,875 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:03,875 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:03,877 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:03,881 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d5958c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d5958c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d5958c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d5958c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:03,886 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:03,886 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:03,886 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:03,886 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:03,886 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:03,886 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:07,072 INFO main Starting FastAPI application
2025-08-13 05:48:07,072 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:48:07,084 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:48:07,085 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:48:07,240 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:48:07,662 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:48:08,602 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:08,602 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:08,602 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:48:08,625 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:08,626 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:08,626 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:48:08,626 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:48:08,965 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:48:09,295 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:48:09,300 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:09,314 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:09,314 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:09,314 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:09,314 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:09,315 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:09,317 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:09,323 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:09,323 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:09,323 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:09,323 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:09,323 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:09,323 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:09,324 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:09,324 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:09,324 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:09,324 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:09,324 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:09,324 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:09,324 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:09,325 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:09,327 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159beb890>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159beb890>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159beb890>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159beb890>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:09,329 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:09,329 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:09,329 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:09,329 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:09,329 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:09,330 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:09,330 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:09,330 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:09,330 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:09,330 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:09,330 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:09,330 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:09,330 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:09,331 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:09,332 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c84410>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159c84410>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c84410>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c84410>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:09,334 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:09,334 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:09,334 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:09,334 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:09,334 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:09,334 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:11,821 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:11,821 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:11,821 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:11,821 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:11,822 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:11,822 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:11,822 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:11,856 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:11,859 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c6e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159c6e060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c6e060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c6e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:11,863 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:11,863 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:11,863 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:11,864 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:11,864 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:11,864 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:11,876 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:11,876 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:11,876 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:11,876 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:11,876 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:11,876 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:11,876 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:11,879 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:11,882 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c6ec40>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159c6ec40>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c6ec40>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c6ec40>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:11,886 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:11,887 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:11,887 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:11,887 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:11,887 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:11,887 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:13,861 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:13,861 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:13,862 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:13,862 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:13,862 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:13,862 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:13,862 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:13,864 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:13,866 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159bcf410>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159bcf410>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159bcf410>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159bcf410>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:13,872 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:13,873 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:13,873 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:13,873 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:13,873 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:13,873 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:15,123 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:15,125 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:15,125 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:15,126 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:15,126 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:15,126 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:15,126 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:15,127 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:15,143 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0ead0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159c0ead0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0ead0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0ead0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:15,150 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:15,150 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:15,151 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:15,151 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:15,151 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:15,151 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:15,167 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:15,167 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:15,167 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:15,167 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:15,167 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:15,167 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:15,167 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:15,168 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:15,169 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0de10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159c0de10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0de10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0de10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:15,171 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:15,171 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:15,171 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:15,171 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:15,171 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:15,171 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:17,029 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:17,029 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:17,030 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:17,030 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:17,030 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:17,030 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:17,030 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:17,031 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:17,032 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1585fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1585fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1585fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1585fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:17,034 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:17,034 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:17,034 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:17,034 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:17,034 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:17,034 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:19,520 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:19,521 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:19,521 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:19,521 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:19,521 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:19,521 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:19,521 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:19,522 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:19,522 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0d7b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x159c0d7b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0d7b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x159c0d7b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:19,524 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:19,524 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:19,524 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:19,524 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:19,524 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:19,524 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:22,381 INFO main Starting FastAPI application
2025-08-13 05:48:22,381 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:48:22,383 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:48:22,384 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:48:22,458 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:48:22,579 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:48:23,026 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:23,026 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:23,026 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:48:23,051 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:23,051 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:23,051 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:48:23,052 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:48:23,445 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:48:23,755 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:48:23,760 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:23,776 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:23,776 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:23,776 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:23,777 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:23,779 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:23,780 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1167c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:23,786 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:23,786 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:23,786 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:23,786 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:23,786 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:23,786 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:24,617 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:24,618 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:24,618 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:24,618 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:24,618 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:24,618 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:24,618 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:24,619 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:24,620 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167f2490>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1167f2490>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167f2490>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167f2490>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:24,624 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:24,624 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:24,624 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:24,624 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:24,624 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:24,624 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:26,283 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:26,283 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:26,284 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:26,284 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:26,284 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:26,284 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:26,285 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:26,288 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:26,289 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167f02d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1167f02d0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167f02d0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167f02d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:26,294 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:26,294 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:26,294 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:26,295 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:26,295 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:26,296 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:29,736 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:29,736 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:29,736 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:29,737 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:29,737 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:29,737 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:29,737 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:29,754 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:29,756 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13549cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13549cc30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13549cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13549cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:29,760 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:29,760 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:29,760 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:29,760 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:29,760 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:29,760 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:29,952 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:29,955 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:29,955 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:29,955 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:29,955 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:29,955 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:29,955 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:29,957 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:29,959 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13549e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13549e060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13549e060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13549e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:29,961 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:29,962 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:29,962 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:29,962 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:29,962 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:29,962 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:33,039 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:33,040 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:33,040 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:33,040 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:33,041 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:33,041 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:33,041 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:33,043 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:33,047 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1167d2f90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1167d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:33,051 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:33,051 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:33,051 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:33,051 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:33,051 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:33,052 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:33,411 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:33,411 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:33,411 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:33,411 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:33,411 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:33,411 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:33,412 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:33,413 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:33,414 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x135495bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x135495bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x135495bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x135495bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:33,416 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:33,416 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:33,416 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:33,416 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:33,416 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:33,416 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:35,860 INFO main Starting FastAPI application
2025-08-13 05:48:35,860 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:48:35,866 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:48:35,867 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:48:35,941 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:48:36,046 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:48:36,488 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:36,488 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:36,488 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:48:36,510 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:36,510 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:36,510 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:48:36,511 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:48:36,877 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:48:37,163 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:48:37,167 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:37,180 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:37,180 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:37,180 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:37,180 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:37,181 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:37,185 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13d8c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:37,196 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:37,196 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:37,196 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:37,196 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:37,196 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:37,196 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:37,197 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:37,197 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:37,197 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:37,197 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:37,197 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:37,197 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:37,197 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:37,198 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:37,200 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8ead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13d8ead50>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8ead50>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8ead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:37,203 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:37,203 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:37,203 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:37,203 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:37,203 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:37,204 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:39,233 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:39,234 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:39,234 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:39,234 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:39,234 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:39,234 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:39,234 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:39,238 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:39,239 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8e9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13d8e9590>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8e9590>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8e9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:39,243 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:39,244 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:39,244 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:39,244 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:39,244 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:39,244 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:40,597 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:40,602 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:40,623 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:40,629 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:40,630 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:40,646 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:40,647 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:40,655 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:40,658 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13da78c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13da78c30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13da78c30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13da78c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:40,661 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:40,661 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:40,661 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:40,661 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:40,661 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:40,661 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:43,672 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:43,672 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:43,672 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:43,672 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:43,672 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:43,672 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:43,672 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:43,673 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:43,674 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13da7a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13da7a060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13da7a060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13da7a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:43,676 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:43,676 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:43,676 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:43,676 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:43,676 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:43,676 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:44,676 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:44,676 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:44,676 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:44,676 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:44,676 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:44,676 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:44,676 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:44,678 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:44,679 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8cef90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x13d8cef90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8cef90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x13d8cef90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:44,682 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:44,682 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:44,682 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:44,682 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:44,682 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:44,683 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:46,468 INFO main Starting FastAPI application
2025-08-13 05:48:46,469 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:48:46,471 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:48:46,472 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:48:46,539 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:48:46,649 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:48:47,844 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:47,844 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:47,844 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:48:47,869 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:47,869 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:47,869 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:48:47,870 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:48:48,228 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:48:48,516 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:48:48,521 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:48,531 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:48,531 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:48,532 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:48,532 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:48,533 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:48,534 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:48,540 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:48,540 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:48,540 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:48,540 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:48,540 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:48,540 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:48,541 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:48,541 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:48,541 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:48,541 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:48,541 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:48,541 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:48,541 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:48,541 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:48,542 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109bead50>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bead50>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:48,545 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:48,545 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:48,545 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:48,545 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:48,545 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:48,545 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:49,598 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:49,598 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:49,598 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:49,599 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:49,599 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:49,599 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:49,599 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:49,601 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:49,603 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109be9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109be9590>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109be9590>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109be9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:49,605 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:49,605 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:49,605 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:49,605 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:49,605 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:49,606 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:51,720 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:51,720 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:51,720 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:51,720 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:51,721 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:51,721 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:51,721 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:51,723 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:51,728 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109c78c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109c78c30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109c78c30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109c78c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:51,732 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:51,732 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:51,732 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:51,732 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:51,732 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:51,732 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:52,014 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:52,014 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:52,014 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:52,014 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:52,014 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:52,014 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:52,014 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:52,015 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:52,016 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109c7a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109c7a060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109c7a060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109c7a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:52,018 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:52,018 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:52,018 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:52,018 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:52,018 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:52,018 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:53,506 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:53,506 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:53,506 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:53,506 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:53,506 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:53,506 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:53,506 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:53,507 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:53,508 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bcef90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109bcef90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bcef90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bcef90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:53,510 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:53,510 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:53,510 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:53,510 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:53,510 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:53,510 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:53,760 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:53,760 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:53,760 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:53,760 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:53,760 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:53,760 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:53,760 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:53,762 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:53,776 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109cd1bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109cd1bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109cd1bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109cd1bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:53,779 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:53,779 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:53,779 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:53,779 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:53,779 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:53,779 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:56,103 INFO main Starting FastAPI application
2025-08-13 05:48:56,103 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:48:56,106 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:48:56,107 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:48:56,174 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:48:56,279 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:48:57,312 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:57,312 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:57,312 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:48:57,446 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:57,447 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:48:57,447 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:48:57,448 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:48:57,807 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:48:58,087 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:48:58,091 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:58,102 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:58,102 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:58,102 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:58,102 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:58,103 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:58,108 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122ac9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x122ac9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122ac9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122ac9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:58,113 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:58,114 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:58,114 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:58,114 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:58,114 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:58,114 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:48:58,414 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:48:58,414 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:48:58,414 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:48:58,414 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:48:58,414 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:48:58,414 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:48:58,414 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:48:58,415 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:48:58,416 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122af2490>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x122af2490>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122af2490>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122af2490>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:48:58,418 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:48:58,418 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:48:58,418 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:48:58,418 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:48:58,418 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:48:58,418 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:01,400 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:01,402 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:01,402 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:01,402 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:01,402 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:01,403 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:01,403 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:01,413 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:01,423 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122af0190>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x122af0190>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122af0190>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122af0190>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:01,466 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:01,480 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:01,481 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:01,481 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:01,481 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:01,481 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:02,247 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:02,247 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:02,247 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:02,247 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:02,247 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:02,247 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:02,248 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:02,249 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:02,250 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12369cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12369cc30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12369cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12369cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:02,252 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:02,252 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:02,252 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:02,252 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:02,252 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:02,252 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:02,732 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:02,732 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:02,733 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:02,733 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:02,733 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:02,733 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:02,733 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:02,740 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:02,748 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12369e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12369e060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12369e060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12369e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:02,750 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:02,751 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:02,751 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:02,751 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:02,751 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:02,751 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:05,697 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:05,698 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:05,698 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:05,698 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:05,698 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:05,699 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:05,699 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:05,700 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:05,701 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122ad2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x122ad2f90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122ad2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x122ad2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:05,704 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:05,704 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:05,704 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:05,704 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:05,704 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:05,704 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:07,187 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:07,191 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:07,212 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:07,232 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:07,241 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:07,242 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:07,242 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:07,246 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:07,249 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12368dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12368dbf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12368dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12368dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:07,253 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:07,253 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:07,253 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:07,253 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:07,253 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:07,253 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:08,896 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:08,896 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:08,897 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:08,897 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:08,897 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:08,897 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:08,897 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:08,958 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:08,960 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1216fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1216fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1216fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1216fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:08,969 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:08,969 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:08,969 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:08,969 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:08,969 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:08,969 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:09,775 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:09,775 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:09,775 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:09,775 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:09,775 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:09,775 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:09,775 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:09,776 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:09,778 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1216ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1216ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1216ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1216ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:09,781 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:09,781 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:09,781 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:09,781 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:09,781 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:09,781 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:10,910 INFO main Starting FastAPI application
2025-08-13 05:49:10,910 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:49:10,914 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:49:10,914 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:49:10,995 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:49:11,109 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:49:11,696 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:11,697 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:11,697 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:49:11,756 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:49:11,756 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:49:11,757 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:49:11,758 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:49:12,122 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:49:12,621 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:49:12,625 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:12,639 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:12,639 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:12,639 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:12,640 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:12,641 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:12,643 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10acc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10acc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10acc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10acc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:12,651 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:12,651 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:12,651 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:12,651 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:12,652 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:12,652 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:12,655 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:12,656 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:12,656 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:12,656 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:12,656 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:12,657 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:12,657 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:12,659 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:12,661 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10ac37d90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10ac37d90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10ac37d90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10ac37d90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:12,664 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:12,664 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:12,664 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:12,664 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:12,664 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:12,664 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:15,064 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:15,064 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:15,064 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:15,065 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:15,068 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:15,069 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:15,069 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:15,080 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:15,108 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10afec690>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10afec690>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10afec690>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10afec690>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:15,112 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:15,112 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:15,112 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:15,112 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:15,112 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:15,112 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:16,529 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:16,529 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:16,529 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:16,529 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:16,529 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:16,529 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:16,529 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:16,530 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:16,532 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af7cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10af7cc30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af7cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af7cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:16,534 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:16,534 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:16,534 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:16,534 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:16,534 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:16,534 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:17,493 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:17,493 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:17,493 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:17,494 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:17,494 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:17,494 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:17,494 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:17,495 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:17,499 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af7e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10af7e060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af7e060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af7e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:17,501 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:17,501 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:17,501 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:17,502 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:17,502 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:17,502 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:20,258 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:20,259 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:20,259 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:20,259 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:20,259 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:20,259 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:20,259 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:20,261 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:20,262 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10acd2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10acd2f90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10acd2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10acd2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:20,265 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:20,265 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:20,265 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:20,265 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:20,265 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:20,265 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:21,406 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:21,406 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:21,406 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:21,406 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:21,406 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:21,406 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:21,406 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:21,407 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:21,408 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af79bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10af79bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af79bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10af79bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:21,413 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:21,413 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:21,414 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:21,414 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:21,414 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:21,414 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:22,302 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:22,302 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:22,302 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:22,302 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:22,304 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:22,304 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:22,304 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:22,340 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:22,352 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109afdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109afdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109afdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109afdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:22,404 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:22,404 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:22,404 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:22,405 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:22,405 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:22,405 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:23,497 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:23,498 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:23,499 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:23,499 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:23,499 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:23,499 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:23,499 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:23,500 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:23,501 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109aff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109aff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109aff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109aff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:23,504 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:23,504 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:23,504 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:23,504 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:23,504 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:23,504 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:26,132 INFO main Starting FastAPI application
2025-08-13 05:49:26,132 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:49:26,138 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:49:26,139 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:49:26,346 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:49:27,261 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:49:27,862 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:27,862 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:27,862 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:49:27,889 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:49:27,889 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:49:27,889 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:49:27,890 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:49:28,303 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:49:28,602 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:49:28,606 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:28,620 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:28,620 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:28,620 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:28,620 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:28,622 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:28,624 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161ec9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x161ec9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161ec9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161ec9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:28,630 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:28,630 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:28,630 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:28,630 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:28,630 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:28,630 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:28,631 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:28,631 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:28,631 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:28,631 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:28,631 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:28,631 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:28,631 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:28,632 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:28,633 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161eead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x161eead50>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161eead50>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161eead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:28,637 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:28,637 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:28,637 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:28,637 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:28,637 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:28,637 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:30,894 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:30,895 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:30,895 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:30,895 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:30,895 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:30,895 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:30,895 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:30,898 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:30,903 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161ee9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x161ee9590>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161ee9590>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x161ee9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:30,907 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:30,908 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:30,908 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:30,908 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:30,908 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:30,908 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:31,476 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:31,477 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:31,477 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:31,478 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:31,479 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:31,479 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:31,479 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:31,481 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:31,482 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1630c8c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1630c8c30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1630c8c30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1630c8c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:31,485 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:31,485 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:31,485 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:31,485 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:31,485 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:31,485 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:32,238 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:49:32,238 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:49:32,239 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:49:32,239 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:49:32,239 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:49:32,239 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:49:32,239 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:49:32,245 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:49:32,247 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1630ca060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1630ca060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1630ca060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1630ca060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:49:32,253 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:49:32,253 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:49:32,253 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:49:32,253 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:49:32,253 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:49:32,253 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:49:34,117 INFO main Starting FastAPI application
2025-08-13 05:49:34,117 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:49:34,129 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:49:34,130 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:49:34,202 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:49:39,901 INFO main Starting FastAPI application
2025-08-13 05:49:39,902 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:49:39,906 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:49:39,907 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:49:40,007 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:49:51,230 INFO main Starting FastAPI application
2025-08-13 05:49:51,231 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:49:51,235 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:49:51,235 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:49:51,326 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:50:03,157 INFO main Starting FastAPI application
2025-08-13 05:50:03,157 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:50:03,162 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:50:03,162 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:50:03,270 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:50:12,820 INFO main Starting FastAPI application
2025-08-13 05:50:12,821 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:50:12,824 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:50:12,824 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:50:12,914 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:50:23,122 INFO main Starting FastAPI application
2025-08-13 05:50:23,123 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:50:23,125 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:50:23,126 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:50:23,246 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:50:35,953 INFO main Starting FastAPI application
2025-08-13 05:50:35,954 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:50:35,958 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:50:35,960 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:50:36,089 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:52:42,684 INFO main Starting FastAPI application
2025-08-13 05:52:42,685 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:52:42,687 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:52:42,687 INFO main 🌐 CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:52:42,780 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:52:42,952 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:52:43,390 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:43,390 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:43,390 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:52:43,413 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:52:43,413 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:52:43,413 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:52:43,414 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:52:43,895 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:52:44,158 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:52:44,162 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,174 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,175 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,175 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,175 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,176 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,177 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bdde80>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109bdde80>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bdde80>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109bdde80>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,182 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,183 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,183 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,183 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,183 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,183 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,184 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,184 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,184 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,184 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,184 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,184 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,185 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,185 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,186 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d78050>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d78050>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d78050>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d78050>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,190 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,190 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,190 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,191 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,191 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,191 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,191 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,191 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,191 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,191 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,191 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,191 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,191 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,192 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,193 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d78690>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d78690>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d78690>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d78690>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,195 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,195 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,195 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,195 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,195 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,195 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,196 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,196 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,196 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,196 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,197 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,197 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,197 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,197 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,198 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10944eb10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10944eb10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10944eb10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10944eb10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,201 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,201 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,201 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,201 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,201 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,201 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,201 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,201 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,201 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,201 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,201 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,201 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,202 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,202 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,203 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10944d0f0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10944d0f0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10944d0f0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10944d0f0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,205 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,205 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,205 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,205 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,205 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,205 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,206 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,206 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,206 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,206 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,206 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,206 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,206 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,207 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,207 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d61370>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d61370>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d61370>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d61370>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,209 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,209 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,209 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,209 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,209 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,210 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,211 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,211 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,211 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,211 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,211 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,211 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,211 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,212 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,212 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a690>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a690>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a690>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a690>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,214 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,214 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,214 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,214 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,214 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,214 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,216 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,216 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,216 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,216 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,216 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,216 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,216 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,217 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,218 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,220 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,220 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,220 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,220 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,220 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,220 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,221 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,221 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,221 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,221 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,221 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,221 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,221 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,222 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,222 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,224 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,224 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,224 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,224 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,225 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,225 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,225 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,226 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,226 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,226 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,226 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,226 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,226 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,226 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,227 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1ae00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1ae00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1ae00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1ae00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,229 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,229 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,229 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,229 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,229 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,229 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,230 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,230 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,230 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,230 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,230 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,230 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,230 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,231 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,232 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,233 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,234 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,234 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,234 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,234 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,234 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,235 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,235 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,235 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,235 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,235 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,235 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,235 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,236 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,237 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,238 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,238 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,238 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,238 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,238 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,238 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,239 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,239 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,239 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,239 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,239 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,239 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,239 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,240 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,241 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,243 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,243 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,243 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,243 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,243 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,243 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,244 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,244 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,244 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,244 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,244 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,244 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,244 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,245 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,246 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,247 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,247 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,247 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,247 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,248 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,248 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,248 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,248 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,248 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,248 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,248 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,248 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,248 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,249 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,251 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,253 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,253 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,253 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,253 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,253 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,253 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,254 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,254 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,254 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,254 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,254 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,254 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,254 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,255 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,256 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,258 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,258 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,258 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,258 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,258 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,258 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,258 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,258 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,259 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,259 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,259 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,259 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,259 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,259 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,260 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19f20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,263 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,263 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,263 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,263 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,263 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,263 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,263 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,263 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,263 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,263 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,264 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,264 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,264 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,265 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,268 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18270>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,270 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,270 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,270 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,270 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,270 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,270 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,271 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,272 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,272 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,272 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,272 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,272 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,272 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,272 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,276 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,278 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,278 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,278 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,278 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,278 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,278 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,279 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,279 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,279 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,279 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,279 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,279 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,279 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,280 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,281 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,283 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,283 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,283 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,283 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,283 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,283 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,284 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,284 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,284 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,284 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,284 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,284 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,284 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,285 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,285 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,287 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,287 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,287 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,287 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,287 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,288 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,288 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,288 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,288 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,288 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,288 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,288 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,288 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,289 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,290 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a360>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,291 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,292 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,292 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,292 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,292 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,292 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,293 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,293 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,293 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,293 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,293 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,293 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,293 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,294 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,295 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fee00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,296 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,297 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,297 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,297 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,297 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,297 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,297 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,297 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,297 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,298 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,298 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,298 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,298 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,298 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,299 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1af10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,301 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,301 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,301 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,301 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,301 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,301 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,302 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,302 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,302 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,302 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,302 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,302 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,302 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,303 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,304 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a8b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,306 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,306 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,306 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,306 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,306 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,306 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,307 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,307 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,307 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,307 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,307 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,307 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,307 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,308 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,309 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff680>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,311 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,311 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,311 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,311 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,311 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,311 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,312 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,312 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,312 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,312 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,312 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,312 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,312 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,313 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,313 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19e10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,315 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,315 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,315 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,315 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,315 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,315 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,316 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,316 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,316 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,316 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,316 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,316 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,316 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,317 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,318 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1bce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,320 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,320 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,320 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,320 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,320 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,320 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,321 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,321 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,321 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,321 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,321 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,321 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,321 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,323 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,325 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1b570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,328 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,328 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,328 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,328 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,328 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,328 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,329 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,329 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,329 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,329 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,329 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,329 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,329 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,330 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,330 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,334 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,334 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,335 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,335 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,335 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,335 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,336 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,336 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,336 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,336 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,336 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,336 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,336 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,337 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,338 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,340 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,340 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,341 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,341 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,341 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,341 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,342 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,342 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,342 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,342 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,342 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,342 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,342 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,343 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,344 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,346 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,346 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,346 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,346 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,346 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,346 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,347 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,347 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,347 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,348 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,348 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,348 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,348 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,348 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,349 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,352 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,352 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,352 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,352 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,352 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,352 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,353 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,353 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,353 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,353 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,353 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,353 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,353 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,354 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,355 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,357 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,357 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,357 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,357 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,358 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,358 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,359 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,359 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,359 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,359 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,359 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,359 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,359 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,360 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,361 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19ae0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,363 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,363 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,363 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,363 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,363 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,363 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,364 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,364 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,364 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,364 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,364 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,364 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,364 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,365 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,367 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19d00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,369 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,369 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,369 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,369 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,369 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,369 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,370 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,370 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,370 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,370 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,370 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,370 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,370 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,371 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,373 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,376 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,376 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,376 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,376 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,376 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,376 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,376 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,377 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,377 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,377 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,377 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,377 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,377 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,378 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,379 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d18e20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,382 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,382 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,382 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,382 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,382 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,382 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,383 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,383 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,383 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,383 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,383 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,383 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,383 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,384 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,385 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089fe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,389 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,389 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,389 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,389 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,389 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,389 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:44,463 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:44,463 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:44,463 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:44,463 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:44,463 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:44,463 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:44,463 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:44,464 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:44,465 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1089ffbd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:44,467 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:44,467 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:44,467 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:44,467 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:44,467 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:44,467 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:45,943 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:45,943 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:45,943 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:45,943 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:45,943 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:45,943 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:45,943 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:45,944 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:45,945 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a9c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:45,947 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:45,947 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:45,947 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:45,947 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:45,947 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:45,947 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:48,531 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:48,531 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:48,531 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:48,531 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:48,532 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:48,532 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:48,532 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:48,532 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:48,533 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d19370>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:48,535 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:48,535 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:48,535 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:48,535 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:48,535 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:48,535 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:49,398 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:49,398 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:49,398 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:49,399 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:49,399 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:49,399 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:49,399 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:49,400 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:52:49,402 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x109d1a470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:52:49,404 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:52:49,404 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:52:49,404 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:52:49,404 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:52:49,404 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:52:49,404 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:52:52,059 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:52:52,060 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:52:52,060 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:52:52,060 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:52:52,060 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:52:52,060 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:52:52,060 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:52:52,061 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
