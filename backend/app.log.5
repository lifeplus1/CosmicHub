2025-08-13 05:44:34,117 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:34,130 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:34,130 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:34,131 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:34,131 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:34,132 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:34,132 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:35,355 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:35,355 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:35,355 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:35,355 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:35,355 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:35,355 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:35,356 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:35,356 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:35,357 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1218fe360>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1218fe360>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1218fe360>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1218fe360>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:35,363 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:35,363 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:35,363 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:35,363 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:35,363 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:35,363 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:35,839 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:35,839 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:35,839 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:35,839 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:35,840 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:35,840 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:35,840 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:35,843 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:35,845 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:35,862 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:35,862 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:35,862 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:35,862 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:35,862 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:35,862 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:36,820 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:36,820 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:36,820 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:36,820 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:36,820 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:36,820 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:36,820 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:36,821 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:36,822 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:36,824 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:36,825 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:36,825 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:36,826 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:36,826 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:36,826 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:38,569 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:38,569 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:38,569 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:38,569 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:38,569 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:38,569 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:38,569 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:38,570 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:38,571 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:38,573 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:38,573 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:38,573 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:38,573 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:38,573 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:38,573 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:38,660 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:38,660 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:38,660 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:38,660 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:38,660 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:38,660 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:38,660 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:38,662 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:38,665 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e140>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7e140>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e140>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e140>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:38,670 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:38,670 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:38,670 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:38,670 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:38,670 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:38,670 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:39,734 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:39,735 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:39,735 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:39,735 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:39,735 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:39,735 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:39,735 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:39,736 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:39,737 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:39,739 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:39,739 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:39,739 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:39,739 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:39,739 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:39,739 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:40,414 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:40,414 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:40,414 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:40,414 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:40,414 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:40,414 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:40,414 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:40,415 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:40,417 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffe580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:40,432 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:40,432 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:40,432 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:40,432 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:40,433 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:40,433 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:43,163 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:43,163 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:43,163 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:43,163 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:43,163 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:43,163 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:43,163 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:43,167 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:43,170 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:43,172 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:43,172 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:43,172 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:43,172 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:43,172 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:43,172 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:44,555 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:44,555 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:44,555 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:44,555 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:44,555 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:44,555 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:44,555 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:44,558 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:44,560 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:44,565 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:44,566 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:44,566 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:44,566 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:44,566 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:44,566 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:45,641 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:45,641 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:45,642 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:45,642 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:45,643 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:45,643 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:45,643 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:45,660 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:45,679 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:45,695 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:45,696 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:45,707 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:45,707 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:45,707 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:45,708 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:48,202 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:48,205 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:48,205 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:48,205 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:48,205 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:48,205 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:48,206 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:48,243 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:48,247 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:48,267 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:48,267 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:48,267 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:48,267 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:48,267 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:48,267 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:48,271 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:48,271 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:48,271 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:48,271 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:48,271 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:48,271 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:48,271 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:48,273 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:48,275 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:48,280 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:48,280 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:48,280 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:48,280 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:48,280 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:48,280 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:49,560 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:49,561 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:49,561 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:49,561 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:49,561 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:49,561 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:49,561 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:49,562 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:49,562 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:49,566 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:49,566 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:49,566 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:49,566 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:49,566 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:49,566 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:50,972 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:50,972 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:50,972 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:50,972 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:50,972 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:50,972 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:50,972 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:50,974 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:50,975 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:50,978 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:50,978 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:50,978 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:50,978 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:50,978 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:50,978 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:52,627 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:52,627 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:52,627 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:52,627 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:52,627 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:52,627 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:52,628 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:52,628 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:52,629 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:52,631 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:52,631 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:52,631 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:52,631 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:52,631 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:52,631 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:55,762 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:55,762 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:55,762 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:55,762 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:55,763 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:55,764 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:55,764 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:55,766 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:55,767 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:55,774 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:55,774 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:55,774 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:55,774 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:55,774 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:55,774 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:56,909 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:56,909 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:56,909 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:56,909 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:56,909 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:56,909 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:56,909 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:56,910 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:56,911 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:56,914 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:56,914 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:56,914 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:56,914 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:56,914 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:56,914 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:58,645 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:58,645 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:58,645 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:58,645 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:58,645 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:58,645 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:58,645 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:58,646 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:58,647 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:58,649 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:58,649 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:58,649 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:58,649 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:58,649 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:58,649 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:44:59,065 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:44:59,065 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:44:59,065 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:44:59,066 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:44:59,066 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:44:59,066 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:44:59,066 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:44:59,067 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:44:59,068 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:44:59,081 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:44:59,081 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:44:59,082 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:44:59,083 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:44:59,083 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:44:59,083 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:00,882 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:00,882 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:00,882 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:00,882 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:00,882 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:00,882 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:00,882 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:00,886 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:00,890 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:00,896 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:00,896 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:00,896 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:00,896 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:00,897 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:00,897 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:03,294 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:03,295 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:03,295 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:03,295 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:03,295 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:03,295 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:03,295 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:03,296 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:03,297 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:03,299 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:03,299 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:03,299 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:03,299 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:03,299 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:03,299 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:06,022 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:06,023 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:06,023 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:06,023 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:06,023 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:06,023 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:06,023 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:06,024 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:06,025 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:06,028 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:06,028 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:06,028 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:06,029 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:06,029 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:06,030 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:07,517 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:07,518 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:07,518 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:07,518 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:07,518 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:07,518 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:07,518 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:07,520 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:07,522 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:07,527 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:07,527 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:07,527 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:07,527 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:07,527 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:07,527 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:07,715 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:07,715 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:07,715 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:07,716 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:07,717 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:07,717 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:07,717 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:07,719 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:07,720 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:07,730 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:07,731 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:07,731 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:07,731 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:07,731 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:07,731 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:11,198 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:11,199 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:11,199 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:11,199 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:11,199 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:11,200 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:11,200 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:11,201 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:11,202 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffd8c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffd8c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffd8c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffd8c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:11,205 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:11,205 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:11,205 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:11,205 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:11,205 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:11,206 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:13,344 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:13,347 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:13,348 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:13,348 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:13,368 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:13,373 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:13,376 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:13,396 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:13,404 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7cc00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7cc00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7cc00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7cc00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:13,423 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:13,423 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:13,423 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:13,423 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:13,424 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:13,424 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:14,473 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:14,473 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:14,473 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:14,473 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:14,473 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:14,473 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:14,473 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:14,475 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:14,477 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:14,480 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:14,480 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:14,480 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:14,481 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:14,481 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:14,481 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:17,624 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:17,625 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:17,626 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:17,626 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:17,626 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:17,626 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:17,626 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:17,631 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:17,640 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c160>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:17,656 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:17,656 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:17,657 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:17,657 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:17,657 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:17,657 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:19,080 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:19,081 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:19,081 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:19,081 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:19,081 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:19,081 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:19,081 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:19,082 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:19,083 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffe030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffe030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:19,086 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:19,086 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:19,086 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:19,086 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:19,086 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:19,086 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:22,559 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:22,560 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:22,560 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:22,561 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:22,562 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:22,562 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:22,562 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:22,564 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:22,596 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffdbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:22,604 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:22,604 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:22,604 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:22,604 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:22,605 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:22,605 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:23,785 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:23,787 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:23,787 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:23,787 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:23,787 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:23,787 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:23,788 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:23,790 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:23,792 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffd040>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123ffd040>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffd040>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123ffd040>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:23,796 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:23,796 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:23,796 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:23,796 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:23,796 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:23,796 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:25,268 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:25,268 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:25,269 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:25,269 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:25,269 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:25,269 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:25,269 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:25,269 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:25,270 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:25,272 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:25,272 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:25,272 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:25,272 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:25,273 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:25,273 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:27,123 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:27,123 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:27,123 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:27,123 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:27,123 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:27,123 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:27,123 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:27,135 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:27,138 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:27,148 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:27,148 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:27,148 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:27,148 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:27,148 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:27,148 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:29,092 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:29,092 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:29,092 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:29,092 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:29,092 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:29,092 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:29,093 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:29,093 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:29,094 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:29,096 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:29,096 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:29,096 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:29,096 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:29,096 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:29,096 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:30,904 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:30,904 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:30,904 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:30,904 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:30,905 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:30,905 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:30,905 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:30,905 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:30,906 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:30,909 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:30,909 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:30,909 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:30,909 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:30,909 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:30,909 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:34,126 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:34,126 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:34,126 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:34,126 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:34,126 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:34,127 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:34,127 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:34,127 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:34,128 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:34,130 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:34,130 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:34,130 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:34,130 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:34,130 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:34,130 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:36,239 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:36,241 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:36,241 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:36,242 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:36,247 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:36,248 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:36,248 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:36,253 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:36,257 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7e7a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e7a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:36,282 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:36,282 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:36,282 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:36,282 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:36,282 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:36,283 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:38,246 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:38,246 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:38,246 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:38,246 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:38,246 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:38,246 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:38,246 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:38,247 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:38,249 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:38,252 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:38,252 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:38,252 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:38,252 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:38,252 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:38,252 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:40,527 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:40,527 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:40,528 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:40,528 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:40,528 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:40,528 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:40,528 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:40,530 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:40,532 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f020>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f020>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f020>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f020>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:40,543 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:40,543 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:40,543 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:40,544 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:40,544 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:40,544 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:41,925 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:41,926 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:41,926 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:41,926 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:41,926 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:41,926 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:41,926 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:41,927 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:41,927 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:41,929 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:41,929 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:41,929 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:41,929 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:41,929 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:41,929 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:43,169 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:43,169 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:43,169 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:43,170 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:43,170 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:43,170 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:43,170 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:43,171 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:43,172 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7de10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:43,174 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:43,174 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:43,174 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:43,174 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:43,174 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:43,174 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:46,129 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:46,129 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:46,129 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:46,129 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:46,129 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:46,130 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:46,130 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:46,138 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:46,140 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:46,144 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:46,144 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:46,144 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:46,145 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:46,145 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:46,145 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:47,438 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:47,438 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:47,438 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:47,438 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:47,438 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:47,438 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:47,438 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:47,441 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:47,443 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7df20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:47,446 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:47,446 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:47,446 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:47,447 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:47,447 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:47,447 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:49,507 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:49,508 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:49,508 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:49,508 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:49,508 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:49,508 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:49,508 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:49,509 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:49,510 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7e580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7e580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:49,512 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:49,512 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:49,512 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:49,512 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:49,512 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:49,512 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:52,387 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:52,387 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:52,387 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:52,387 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:52,387 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:52,387 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:52,387 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:52,389 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:52,391 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7fce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:52,411 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:52,411 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:52,411 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:52,412 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:52,412 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:52,412 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:52,982 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:52,982 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:52,982 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:52,982 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:52,982 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:52,982 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:52,982 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:52,983 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:52,985 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7c7c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:52,987 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:52,987 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:52,987 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:52,987 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:52,987 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:52,987 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:56,789 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:56,790 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:56,790 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:56,790 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:56,790 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:56,790 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:56,790 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:56,793 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:56,794 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7d6a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:56,801 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:56,801 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:56,802 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:56,802 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:56,802 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:56,802 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:45:57,599 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:45:57,600 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:45:57,600 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:45:57,600 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:45:57,600 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:45:57,600 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:45:57,600 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:45:57,602 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:45:57,603 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f350>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:45:57,606 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:45:57,606 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:45:57,606 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:45:57,606 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:45:57,606 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:45:57,606 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:00,623 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:00,624 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:00,624 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:00,624 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:00,624 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:00,624 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:00,625 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:00,626 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:00,627 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:00,630 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:00,630 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:00,630 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:00,630 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:00,630 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:00,630 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:01,781 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:01,782 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:01,782 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:01,782 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:01,782 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:01,782 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:01,782 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:01,783 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:01,784 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f790>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7f790>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f790>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7f790>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:01,787 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:01,787 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:01,787 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:01,787 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:01,787 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:01,788 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:03,992 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:03,995 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:03,995 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:03,995 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:03,995 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:03,995 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:03,998 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:04,010 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:04,014 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x123e7ff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:04,020 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:04,021 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:04,021 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:04,021 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:04,021 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:04,021 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:05,769 INFO main Starting FastAPI application
2025-08-13 05:46:05,769 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:46:05,774 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:46:05,775 INFO main  CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:46:05,881 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:46:06,033 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:46:06,599 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:06,600 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:06,600 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:46:06,623 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:46:06,623 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:46:06,623 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:46:06,624 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:46:06,976 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:46:07,339 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:46:07,344 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:07,370 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:07,371 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:07,371 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:07,371 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:07,372 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:07,374 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1289c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:07,381 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:07,381 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:07,381 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:07,381 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:07,381 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:07,381 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:07,631 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:07,631 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:07,631 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:07,631 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:07,631 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:07,631 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:07,631 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:07,632 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:07,633 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289f2490>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1289f2490>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289f2490>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289f2490>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:07,636 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:07,636 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:07,636 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:07,636 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:07,636 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:07,636 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:08,791 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:08,793 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:08,793 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:08,793 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:08,793 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:08,793 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:08,793 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:08,794 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:08,795 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289f0190>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1289f0190>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289f0190>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289f0190>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:08,797 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:08,797 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:08,797 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:08,797 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:08,797 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:08,797 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:12,009 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:12,010 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:12,010 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:12,010 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:12,010 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:12,010 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:12,010 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:12,013 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:12,019 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12969cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12969cc30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12969cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12969cc30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:12,030 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:12,031 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:12,032 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:12,032 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:12,032 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:12,032 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:13,323 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:13,323 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:13,323 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:13,324 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:13,325 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:13,325 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:13,325 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:13,326 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:13,327 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12969e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12969e060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12969e060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12969e060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:13,329 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:13,329 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:13,329 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:13,329 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:13,329 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:13,329 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:14,921 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:14,922 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:14,922 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:14,922 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:14,922 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:14,922 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:14,922 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:14,925 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:14,927 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1289d2f90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1289d2f90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:14,940 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:14,941 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:14,941 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:14,941 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:14,941 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:14,941 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:15,391 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:15,391 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:15,391 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:15,391 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:15,391 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:15,392 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:15,392 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:15,392 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:15,393 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:15,395 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:15,395 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:15,396 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:15,396 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:15,396 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:15,396 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:18,254 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:18,255 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:18,255 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:18,256 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:18,256 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:18,256 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:18,256 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:18,270 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:18,271 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:18,274 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:18,274 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:18,274 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:18,274 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:18,274 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:18,274 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:19,645 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:19,647 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:19,647 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:19,647 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:19,647 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:19,647 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:19,647 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:19,648 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:19,652 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:19,654 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:19,654 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:19,654 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:19,654 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:19,654 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:19,654 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:22,441 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:22,441 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:22,441 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:22,441 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:22,442 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:22,442 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:22,442 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:22,447 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:22,448 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:22,452 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:22,452 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:22,452 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:22,452 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:22,452 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:22,452 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:22,703 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:22,703 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:22,703 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:22,703 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:22,704 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:22,704 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:22,704 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:22,705 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:22,706 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:22,709 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:22,709 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:22,709 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:22,710 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:22,710 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:22,710 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:25,000 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:25,000 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:25,000 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:25,000 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:25,000 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:25,000 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:25,000 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:25,001 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:25,002 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968e250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:25,004 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:25,004 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:25,004 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:25,004 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:25,004 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:25,004 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:26,652 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:26,652 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:26,652 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:26,652 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:26,652 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:26,652 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:26,652 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:26,669 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:26,677 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:26,703 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:26,703 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:26,705 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:26,708 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:26,708 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:26,708 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:27,213 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:27,213 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:27,213 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:27,213 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:27,214 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:27,214 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:27,214 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:27,217 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:27,218 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d8c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968d8c0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d8c0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d8c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:27,221 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:27,221 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:27,221 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:27,221 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:27,221 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:27,221 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:30,132 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:30,134 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:30,134 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:30,137 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:30,137 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:30,137 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:30,137 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:30,140 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:30,144 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:30,151 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:30,151 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:30,151 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:30,151 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:30,151 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:30,151 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:31,682 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:31,685 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:31,686 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:31,686 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:31,686 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:31,686 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:31,686 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:31,688 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:31,689 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff570>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:31,691 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:31,691 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:31,691 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:31,691 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:31,691 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:31,691 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:35,046 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:35,048 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:35,048 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:35,049 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:35,050 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:35,050 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:35,050 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:35,052 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:35,053 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:35,055 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:35,055 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:35,055 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:35,056 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:35,056 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:35,056 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:35,154 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:35,154 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:35,154 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:35,154 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:35,155 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:35,155 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:35,156 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:35,158 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:35,166 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff240>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ff240>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff240>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff240>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:35,180 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:35,189 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:35,202 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:35,210 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:35,211 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:35,211 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:36,768 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:36,768 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:36,768 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:36,769 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:36,769 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:36,769 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:36,769 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:36,771 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:36,774 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:36,792 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:36,792 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:36,793 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:36,793 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:36,793 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:36,793 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:38,692 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:38,692 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:38,693 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:38,693 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:38,693 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:38,693 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:38,693 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:38,693 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:38,694 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d480>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968d480>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d480>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d480>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:38,697 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:38,697 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:38,697 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:38,697 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:38,697 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:38,697 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:39,828 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:39,828 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:39,828 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:39,829 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:39,829 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:39,829 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:39,829 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:39,830 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:39,832 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fff00>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:39,835 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:39,836 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:39,836 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:39,836 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:39,836 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:39,836 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:43,042 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:43,042 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:43,042 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:43,042 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:43,042 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:43,043 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:43,043 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:43,044 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:43,045 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fde10>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fde10>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fde10>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fde10>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:43,059 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:43,059 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:43,059 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:43,059 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:43,059 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:43,059 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:43,062 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:43,063 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:43,063 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:43,063 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:43,063 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:43,063 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:43,063 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:43,064 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:43,065 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffdf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:43,068 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:43,068 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:43,068 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:43,068 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:43,068 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:43,068 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:45,444 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:45,445 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:45,445 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:45,445 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:45,445 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:45,445 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:45,445 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:45,449 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:45,451 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:45,453 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:45,453 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:45,454 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:45,454 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:45,454 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:45,454 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:47,290 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:47,290 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:47,290 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:47,290 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:47,290 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:47,290 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:47,290 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:47,291 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:47,293 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d590>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968d590>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d590>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968d590>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:47,295 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:47,295 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:47,295 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:47,295 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:47,295 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:47,295 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:47,771 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:47,772 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:47,773 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:47,773 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:47,785 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:47,786 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:47,786 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:47,814 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:47,837 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e580>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968e580>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e580>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e580>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:47,844 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:47,844 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:47,844 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:47,844 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:47,844 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:47,844 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:49,477 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:49,477 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:49,477 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:49,477 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:49,478 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:49,478 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:49,478 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:49,479 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:49,481 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ffce0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:49,485 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:49,485 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:49,485 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:49,485 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:49,485 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:49,485 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:49,687 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:49,687 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:49,687 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:49,687 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:49,687 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:49,687 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:49,687 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:49,688 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:49,689 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:49,694 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:49,694 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:49,694 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:49,694 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:49,695 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:49,695 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:51,703 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:51,703 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:51,703 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:51,703 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:51,704 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:51,704 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:51,704 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:51,706 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:51,707 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fe470>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:51,709 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:51,709 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:51,709 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:51,709 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:51,709 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:51,709 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:53,218 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:53,218 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:53,218 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:53,218 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:53,218 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:53,218 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:53,218 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:53,220 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:53,223 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:53,284 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:53,284 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:53,284 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:53,286 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:53,288 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:53,288 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:53,484 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:53,484 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:53,484 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:53,484 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:53,484 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:53,484 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:53,484 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:53,485 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:53,486 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968dbf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:53,488 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:53,488 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:53,488 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:53,488 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:53,488 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:53,488 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:57,085 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:57,085 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:57,085 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:57,085 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:57,085 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:57,086 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:57,086 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:57,088 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:57,089 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:57,094 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:57,094 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:57,094 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:57,094 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:57,094 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:57,094 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:57,473 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:57,473 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:57,474 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:57,474 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:57,474 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:57,474 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:57,475 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:57,479 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:57,481 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:57,491 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:57,492 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:57,492 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:57,492 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:57,493 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:57,493 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:58,674 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:58,675 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:58,675 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:58,675 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:58,675 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:58,675 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:58,675 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:58,676 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:58,677 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6fecf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:58,679 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:58,679 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:58,679 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:58,679 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:58,679 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:58,679 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:46:58,739 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:46:58,739 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:46:58,739 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:46:58,739 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:46:58,739 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:46:58,739 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:46:58,739 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:46:58,740 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:46:58,741 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11f6ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11f6ff9b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:46:58,745 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:46:58,745 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:46:58,746 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:46:58,747 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:46:58,747 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:46:58,747 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:03,163 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:03,163 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:03,163 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:03,163 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:03,163 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:03,163 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:03,163 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:03,171 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:03,178 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e690>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968e690>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e690>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968e690>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:03,193 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:03,194 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:03,206 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:03,214 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:03,217 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:03,217 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:04,262 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:04,263 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:04,263 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:04,263 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:04,264 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:04,264 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:04,264 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:04,272 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:04,274 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968cf30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12968cf30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968cf30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12968cf30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:04,310 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:04,312 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:04,312 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:04,312 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:04,313 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:04,317 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:05,935 INFO main Starting FastAPI application
2025-08-13 05:47:05,935 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:47:05,938 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:47:05,939 INFO main  CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:47:06,017 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:47:06,168 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:47:07,393 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:07,393 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:07,393 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:47:07,481 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:47:07,481 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:47:07,481 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:47:07,483 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:47:07,836 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:47:08,121 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:47:08,126 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:08,139 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:08,139 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:08,139 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:08,139 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:08,142 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:08,143 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1295c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:08,149 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:08,149 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:08,149 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:08,149 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:08,149 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:08,149 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:08,150 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:08,150 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:08,150 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:08,150 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:08,150 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:08,150 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:08,150 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:08,152 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:08,155 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295ead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1295ead50>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295ead50>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295ead50>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:08,159 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:08,159 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:08,159 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:08,159 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:08,159 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:08,159 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:08,889 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:08,889 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:08,889 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:08,889 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:08,889 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:08,889 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:08,889 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:08,890 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:08,891 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295e9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1295e9590>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295e9590>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295e9590>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:08,893 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:08,893 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:08,893 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:08,893 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:08,893 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:08,893 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:09,921 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:09,923 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:09,923 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:09,923 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:09,923 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:09,923 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:09,923 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:09,936 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:09,959 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129678c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x129678c30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129678c30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129678c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:09,962 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:09,963 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:09,963 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:09,963 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:09,963 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:09,963 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:11,834 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:11,835 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:11,835 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:11,835 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:11,835 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:11,835 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:11,835 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:11,837 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:11,838 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12967a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x12967a060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12967a060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x12967a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:11,840 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:11,840 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:11,840 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:11,840 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:11,840 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:11,840 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:14,076 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:14,077 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:14,077 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:14,077 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:14,077 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:14,077 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:14,077 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:14,080 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:14,084 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295cef90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1295cef90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295cef90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1295cef90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:14,086 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:14,087 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:14,087 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:14,087 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:14,087 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:14,087 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:15,854 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:15,856 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:15,856 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:15,856 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:15,856 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:15,856 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:15,856 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:15,861 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:15,863 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d1bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1296d1bf0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d1bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d1bf0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:15,870 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:15,870 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:15,870 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:15,870 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:15,870 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:15,870 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:16,711 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:16,711 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:16,711 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:16,711 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:16,711 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:16,712 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:16,712 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:16,722 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:16,723 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11edff8a0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edff8a0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:16,726 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:16,726 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:16,726 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:16,726 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:16,726 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:16,726 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:17,277 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:17,278 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:17,278 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:17,278 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:17,278 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:17,278 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:17,278 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:17,280 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:17,283 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11edffac0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edffac0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:17,298 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:17,298 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:17,299 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:17,299 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:17,299 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:17,299 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:18,853 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:18,854 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:18,854 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:18,854 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:18,854 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:18,854 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:18,854 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:18,855 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:18,856 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edff240>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11edff240>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edff240>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edff240>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:18,860 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:18,860 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:18,860 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:18,860 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:18,860 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:18,861 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:20,454 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:20,454 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:20,454 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:20,454 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:20,455 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:20,455 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:20,455 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:20,456 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:20,461 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edfdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x11edfdf20>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edfdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x11edfdf20>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:20,463 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:20,463 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:20,463 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:20,463 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:20,463 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:20,464 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:22,271 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:22,271 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:22,271 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:22,271 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:22,271 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:22,271 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:22,271 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:22,273 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:22,275 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d2250>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1296d2250>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d2250>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d2250>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:22,279 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:22,279 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:22,279 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:22,279 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:22,279 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:22,279 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:22,623 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:22,623 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:22,623 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:22,623 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:22,623 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:22,623 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:22,623 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:22,629 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:22,639 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d2030>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x1296d2030>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d2030>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1296d2030>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:22,642 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:22,642 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:22,642 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:22,642 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:22,642 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:22,642 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:24,840 INFO main Starting FastAPI application
2025-08-13 05:47:24,840 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:47:24,842 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:47:24,843 INFO main  CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:47:24,902 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:47:25,014 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:47:25,470 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:25,471 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:25,471 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:47:25,493 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:47:25,493 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:47:25,493 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:47:25,494 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:47:25,844 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:47:26,122 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:47:26,126 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:26,136 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:26,136 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:26,136 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:26,136 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:26,138 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:26,139 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128dc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x128dc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128dc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128dc9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:26,145 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:26,145 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:26,145 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:26,145 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:26,145 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:26,145 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:27,340 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:27,340 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:27,341 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:27,341 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:27,341 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:27,342 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:27,342 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:27,343 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:27,345 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128df2710>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x128df2710>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128df2710>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128df2710>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:27,349 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:27,349 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:27,349 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:27,349 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:27,349 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:27,349 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:28,971 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:28,972 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:28,977 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:28,977 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:28,977 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:28,984 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:29,000 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:29,020 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:29,031 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128df0910>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x128df0910>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128df0910>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x128df0910>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:29,038 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:29,039 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:29,039 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:29,039 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:29,039 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:29,039 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:30,233 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:30,233 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:30,234 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:30,234 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:30,234 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:30,235 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:30,235 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:30,238 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:30,241 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129b98c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x129b98c30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129b98c30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129b98c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:30,245 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:30,245 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:30,245 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:30,245 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:30,245 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:30,245 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:31,878 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:31,878 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:31,878 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:31,879 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:31,879 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:31,879 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:31,879 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:31,880 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:31,881 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129b9a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x129b9a060>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129b9a060>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x129b9a060>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:31,886 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:31,886 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:31,886 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:31,886 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:31,886 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:31,886 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:33,255 INFO main Starting FastAPI application
2025-08-13 05:47:33,256 INFO main Connecting to Redis at: redis://localhost:6379
2025-08-13 05:47:33,258 WARNING main Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.. Falling back to in-memory rate limiting.
2025-08-13 05:47:33,258 INFO main  CORS enabled for origins: ['http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:3000']
2025-08-13 05:47:33,327 WARNING auth Firebase Admin credentials not found. Running with mock auth (development only). Set FIREBASE_CREDENTIALS or individual FIREBASE_* vars, or set ALLOW_MOCK_AUTH=0 to disable.
2025-08-13 05:47:33,427 WARNING database Firestore credentials not found. Using in-memory database (development only).
2025-08-13 05:47:35,335 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:35,336 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:35,336 DEBUG astro.calculations.chart Resolving location for city: Naperville
2025-08-13 05:47:35,396 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:47:35,397 DEBUG urllib3.util.retry Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2025-08-13 05:47:35,402 DEBUG geopy Nominatim.geocode: https://nominatim.openstreetmap.org/search?q=Naperville&format=json&limit=1
2025-08-13 05:47:35,418 DEBUG urllib3.connectionpool Starting new HTTPS connection (1): nominatim.openstreetmap.org:443
2025-08-13 05:47:35,892 DEBUG urllib3.connectionpool https://nominatim.openstreetmap.org:443 "GET /search?q=Naperville&format=json&limit=1 HTTP/1.1" 200 475
2025-08-13 05:47:36,162 DEBUG astro.calculations.chart Resolved: lat=41.7728699, lon=-88.1479278, tz=America/Chicago
2025-08-13 05:47:36,166 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:36,179 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:36,179 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:36,179 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:36,179 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:36,182 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:36,185 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10c7c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7c9fd0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:36,193 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:36,193 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:36,193 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:36,193 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:36,193 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:36,193 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:36,194 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:36,195 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:36,195 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:36,195 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:36,195 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:36,195 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:36,195 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:36,197 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:36,198 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c737d90>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10c737d90>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c737d90>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c737d90>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:36,201 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:36,201 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:36,201 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:36,201 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:36,201 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:36,201 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:37,743 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:37,743 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:37,743 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:37,743 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:37,743 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:37,744 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:37,744 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:37,746 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:37,753 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7f0190>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10c7f0190>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7f0190>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10c7f0190>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:37,786 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:37,786 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:37,786 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:37,787 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:37,787 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:37,787 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:38,002 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:38,002 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:38,002 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:38,002 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:38,002 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:38,002 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:38,002 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:38,003 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:38,004 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d598c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d598c30>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d598c30>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d598c30>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:38,005 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:38,005 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:38,005 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:38,005 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:38,006 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:38,006 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:42,219 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:42,220 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:42,220 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:42,220 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:42,220 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:42,220 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:42,220 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:42,226 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
2025-08-13 05:47:42,231 ERROR astro.calculations.ephemeris Error in remote planetary positions: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d59a190>: Failed to establish a new connection: [Errno 61] Connection refused'))
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
        self, f"Failed to establish a new connection: {e}"
    ) from e
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x10d59a190>: Failed to establish a new connection: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d59a190>: Failed to establish a new connection: [Errno 61] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/Chris/Projects/CosmicHub/backend/astro/calculations/ephemeris.py", line 114, in get_planetary_positions
    response = requests.post(
        f"{ephemeris_url}/calculate/batch",
    ...<2 lines>...
        timeout=30
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /calculate/batch (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10d59a190>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-13 05:47:42,243 DEBUG astro.calculations.house_systems Calculating houses for JD: 2448657.7409699033, lat: 41.7728699, lon: -88.1479278, system: P
2025-08-13 05:47:42,243 DEBUG astro.calculations.house_systems Using house system bytes: b'P', type: <class 'bytes'>, length: 1
2025-08-13 05:47:42,243 DEBUG astro.calculations.house_systems Houses calculated: [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], Angles: {'ascendant': 213.79582804813106, 'mc': 130.79390371798848, 'vertex': 71.97490145342233}
2025-08-13 05:47:42,243 DEBUG astro.calculations.aspects Calculating aspects for planets: {}
2025-08-13 05:47:42,243 DEBUG astro.calculations.aspects Aspects calculated: []
2025-08-13 05:47:42,244 DEBUG astro.calculations.chart Chart data: {'julian_day': 2448657.7409699033, 'latitude': 41.7728699, 'longitude': -88.1479278, 'timezone': 'America/Chicago', 'planets': {}, 'houses': [{'house': 1, 'cusp': 213.79582804813106}, {'house': 2, 'cusp': 242.24291476901885}, {'house': 3, 'cusp': 275.2243880453822}, {'house': 4, 'cusp': 310.7939037179885}, {'house': 5, 'cusp': 343.8773111133907}, {'house': 6, 'cusp': 11.463092201156428}, {'house': 7, 'cusp': 33.79582804813106}, {'house': 8, 'cusp': 62.24291476901885}, {'house': 9, 'cusp': 95.22438804538223}, {'house': 10, 'cusp': 130.79390371798848}, {'house': 11, 'cusp': 163.8773111133907}, {'house': 12, 'cusp': 191.46309220115646}], 'angles': {'ascendant': 213.79582804813106, 'descendant': 33.79582804813106, 'mc': 130.79390371798848, 'ic': 310.7939037179885, 'vertex': 71.97490145342233, 'antivertex': 251.97490145342232}, 'aspects': []}
2025-08-13 05:47:42,955 DEBUG astro.calculations.chart Calculating chart: year=1992, month=2, day=4, hour=23, minute=47, lat=None, lon=None, timezone=UTC, city=Naperville, house_system=P
2025-08-13 05:47:42,955 DEBUG astro.calculations.chart Fetching location data for city
2025-08-13 05:47:42,955 DEBUG astro.calculations.chart Using timezone: America/Chicago
2025-08-13 05:47:42,955 DEBUG astro.calculations.chart Local datetime: 1992-02-04 23:47:00
2025-08-13 05:47:42,956 DEBUG astro.calculations.chart UTC datetime: 1992-02-05 05:47:00+00:00
2025-08-13 05:47:42,956 DEBUG astro.calculations.chart Julian day result: status=2448657.741645648, julian_day=2448657.7409699033
2025-08-13 05:47:42,956 DEBUG astro.calculations.ephemeris Calculating planetary positions for JD: 2448657.7409699033 (remote)
2025-08-13 05:47:42,960 DEBUG urllib3.connectionpool Starting new HTTP connection (1): localhost:8001
